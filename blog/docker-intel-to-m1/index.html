<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>What I Learned Going from Intel to Apple Silicon | Jennifer Reif</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Photo credit  Earlier this year, I received a new work laptop with the recent Apple silicon chip (versus Intel chip). The new M1 has been critically examined with avid enthusiasm and criticism, so I wasn’t sure what my outcome would be.
 Thus far, it’s been positive, and I really haven’t noticed too much disruption in my work. Things have been faster, but I’m not sure whether to entirely attribute that new chip itself, or just the new machine, in general."><meta name=generator content="Hugo 0.85.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="What I Learned Going from Intel to Apple Silicon"><meta property="og:description" content="Photo credit  Earlier this year, I received a new work laptop with the recent Apple silicon chip (versus Intel chip). The new M1 has been critically examined with avid enthusiasm and criticism, so I wasn’t sure what my outcome would be.
 Thus far, it’s been positive, and I really haven’t noticed too much disruption in my work. Things have been faster, but I’m not sure whether to entirely attribute that new chip itself, or just the new machine, in general."><meta property="og:type" content="article"><meta property="og:url" content="https://jmhreif.com/blog/docker-intel-to-m1/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-11-04T09:00:00-06:00"><meta property="article:modified_time" content="2021-11-04T09:00:00-06:00"><meta itemprop=name content="What I Learned Going from Intel to Apple Silicon"><meta itemprop=description content="Photo credit  Earlier this year, I received a new work laptop with the recent Apple silicon chip (versus Intel chip). The new M1 has been critically examined with avid enthusiasm and criticism, so I wasn’t sure what my outcome would be.
 Thus far, it’s been positive, and I really haven’t noticed too much disruption in my work. Things have been faster, but I’m not sure whether to entirely attribute that new chip itself, or just the new machine, in general."><meta itemprop=datePublished content="2021-11-04T09:00:00-06:00"><meta itemprop=dateModified content="2021-11-04T09:00:00-06:00"><meta itemprop=wordCount content="1647"><meta itemprop=keywords content="docker,m1,migrate,learning,upgrade,"><meta name=twitter:card content="summary"><meta name=twitter:title content="What I Learned Going from Intel to Apple Silicon"><meta name=twitter:description content="Photo credit  Earlier this year, I received a new work laptop with the recent Apple silicon chip (versus Intel chip). The new M1 has been critically examined with avid enthusiasm and criticism, so I wasn’t sure what my outcome would be.
 Thus far, it’s been positive, and I really haven’t noticed too much disruption in my work. Things have been faster, but I’m not sure whether to entirely attribute that new chip itself, or just the new machine, in general."></head><body class="ma0 avenir bg-near-white"><header class="cover bg-top" style=background-image:url(https://jmhreif.com/img/dockerM1/unsplash-apple-laptop.jpeg)><div class="pb3-m pb6-l bg-black-60"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jennifer Reif</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/abstracts/ title="Abstracts page">Abstracts</a></li></ul><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">BLOG</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://jmhreif.com/blog/docker-intel-to-m1/&text=What%20I%20Learned%20Going%20from%20Intel%20to%20Apple%20Silicon" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://jmhreif.com/blog/docker-intel-to-m1/&title=What%20I%20Learned%20Going%20from%20Intel%20to%20Apple%20Silicon" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">What I Learned Going from Intel to Apple Silicon</h1><time class="f6 mv4 dib tracked" datetime=2021-11-04T09:00:00-06:00>November 4, 2021</time>
<span class="f6 mv4 dib tracked">- 8 minutes read</span>
<span class="f6 mv4 dib tracked">- 1647 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><div class=paragraph><small><i><a href="https://unsplash.com/photos/lzh3hPtJz9c?utm_source=unsplash&utm_medium=referral&utm_content=creditShareLink">Photo credit</a></i></small></div><div class=paragraph><p>Earlier this year, I received a new work laptop with the recent Apple silicon chip (versus Intel chip). The new M1 has been critically examined with avid enthusiasm and criticism, so I wasn’t sure what my outcome would be.</p></div><div class=paragraph><p>Thus far, it’s been positive, and I really haven’t noticed too much disruption in my work. Things have been faster, but I’m not sure whether to entirely attribute that new chip itself, or just the new machine, in general.</p></div><div class=paragraph><p>I had heard a few horrifying reviews about the incompatibility of Docker, but since the machines had been around 6 months or more, I hoped most of the major issues had been corrected. With this post, I want to provide some info on my learning curve to move from the old to the new, with some extra details on how that impacted Docker.</p></div><div class=paragraph><p>Let’s dive in!</p></div><div class=sect1><h2 id=_first_stop_restore_from_backup>First stop: Restore from backup</h2><div class=sectionbody><div class=paragraph><p>As probably many of you do, I made sure to have a final backup with any latest changes before migrating to the new device. This was handled through Time Machine and only took a little while to complete. Once that was done, I shut down my old machine and started up the new one.</p></div><div class=paragraph><p>There are a couple of initial setup screens before it asks whether you want to set up the laptop as a new device or restore from backup. I chose to restore from backup, then proceeded to choose which one I wanted (latest in a list). The restore process took quite a while (a few hours), but there weren’t any major hiccups.</p></div><div class=paragraph><p>Ok, so far, so good. Now it’s time to start working and patch the gaps.</p></div></div></div><div class=sect1><h2 id=_next_stop_updates_updates_updates>Next stop: Updates, updates, updates</h2><div class=sectionbody><div class=paragraph><p>The backup finished, and I could log in to the new machine. Now I needed to start trying to access things and operate as usual to find any missing pieces.</p></div><div class=paragraph><p>Naturally, there were some updates from the App Store (out-of-sync with latest system and app updates). These weren’t too complex to fix and only took a few minutes.</p></div><div class=paragraph><p>Next, I started logging in to my usual work applications - Gmail, Terminal, Github, Slack, Zoom, Neo4j Desktop, Keynote, and more. I ran across a few places where I needed to approve the new device through 2-factor auth (Gmail, Github, etc), and if you’re like me with a few devices, I also had to remove the old device from my iCloud account before adding the new one to sync things like Messages across my devices.</p></div><div class=paragraph><p>Finally, there were a few things that were incompatible and needed more investigation.</p></div></div></div><div class=sect1><h2 id=_next_stop_apply_thinking_cap_to_resolve_issues>Next stop: Apply thinking cap to resolve issues</h2><div class=sectionbody><div class=paragraph><p>The biggest one in this category was figuring out what (if anything) had changed with Docker. Most other applications and processes either supported both architectures (Intel x86 and Apple arm64), but Docker wasn’t as simple. Why?</p></div><div class=paragraph><p>While I’m not familiar with all the under-the-hood details, let’s think about what Docker is trying to do. It allows you to run various technologies in a box that is agnostic from the system. It creates its own environment, but that environment still needs to be able to spin up and down on top of whatever operating system and hardware you’re working with. So, while the technology you want to containerize doesn’t have to know or understand your device’s OS, Docker itself does in order to function within your system’s innerworkings.</p></div><div class=paragraph><p>I mostly followed instructions in the <a href=https://docs.docker.com/desktop/mac/apple-silicon/ target=_blank rel=noopener>Docker docs for Apple silicon</a>, but got tripped up with some of the new added terms. What is a multi-platform image? Are there different commands to build and run images on arm64 (silicon chip)? Will the Docker images I use be available on Apple silicon? Let’s take a quick detour to discuss terminology.</p></div><div class=sect2><h3 id=_multi_platform>Multi-platform</h3><div class=paragraph><p>A multi-platform image does as its name suggests - supports (or can be run on) multiple platforms. For instance, if you go to Docker Hub’s <a href="https://hub.docker.com/search?type=image" target=_blank rel=noopener>list of containers</a>, you will see supported architectures listed as tags. You can also search containers with a filter for particular architectures. Both are shown in the image below.</p></div><div class=imageblock><div class=content><img src=/img/dockerM1/docker-hub-multi.png alt="docker hub multi"></div></div><div class=paragraph><p>Some containers support multiple architectures, while others do not. The example Docker uses in the documentation is between the <code>mysql</code> container and <code>mariadb</code> container. The <a href="https://hub.docker.com/_/mysql?tab=tags&page=1&ordering=last_updated" target=_blank rel=noopener>mysql container</a> does not support arm64, while the <a href="https://hub.docker.com/_/mariadb?tab=tags&page=1&ordering=last_updated" target=_blank rel=noopener>mariadb container</a> does.</p></div><div class=paragraph><div class=title>MySQL container - amd64 (x86) only</div><p><span class=image><img src=/img/dockerM1/mysql-arch.png alt="mysql arch"></span></p></div><div class=paragraph><div class=title>MariaDB container - arm64 (M1) and amd64</div><p><span class=image><img src=/img/dockerM1/mariadb-arch.png alt="mariadb arch"></span></p></div><div class=paragraph><p>Notice that MariaDB supports both Intel and Apple chip architectures (amd64 and arm64). This is what we want to look for - containers that support both. Why? If you have a project that supports one or the other, then anyone who tries to replicate or run that project on a different architecture is going to need to modify code to pull a different image.</p></div><div class=paragraph><p>Let’s take the Neo4j container as the example. If you look at <a href="https://hub.docker.com/_/neo4j?tab=tags" target=_blank rel=noopener>Neo4j’s Docker image</a>, it only supports amd64 (Intel chip). So what do we do for my M1?</p></div><div class=paragraph><p>Thankfully, Neo4j also has an option for arm64 architecture, although it’s a separate image. The <a href=https://hub.docker.com/r/neo4j/neo4j-arm64-experimental target=_blank rel=noopener>arm64 image</a> is currently marked as experimental, but that is expected to change to official in the coming weeks. :)</p></div><div class=paragraph><p>This means that you will need to locate the container image that supports your architecture, unless the image is already multi-platform (supports multiple). Also, if you pull someone else’s project with a Docker container, you may need to update code with a different image to match your architecture. Might not be that much of an impact, but definitely something to watch for!</p></div></div><div class=sect2><h3 id=_buildx_tool>Buildx tool</h3><div class=paragraph><p>The Apple silicon instructions from Docker mention the <a href=https://docs.docker.com/engine/reference/commandline/buildx/ target=_blank rel=noopener>buildx command line tool</a>. This threw me off, too, thinking that I needed to move to this rather than using the <code>docker build</code> command. What is buildx and what does it do?</p></div><div class=paragraph><p>Buildx gives us a way to build Docker images for a particular platform (or several), rather than only building for our machine’s architecture. For instance, let’s say I am building a base image for a technology from my M1 laptop, but I want it to run on x86 (Intel chip) architecture. I can use buildx to override my machine’s system to build it for any system I specify, such as x86 or even multi-platform for both x86 and arm64.</p></div><div class=paragraph><p>So, I don’t need to use <code>buildx</code> in order to build all my Docker images on M1. I can use the regular Docker <a href=https://docs.docker.com/engine/reference/commandline/build/ target=_blank rel=noopener>build command</a> (as long as any container base image I’m using is compatible with my architecture, of course). The only time I need buildx is if I’m building a container for a system that doesn’t match my own or if I want it to support multiple architectures.</p></div><div class=paragraph><p>Note: I’m making an assumption that any sourced images used in a container built with <code>buildx</code> would also need to support multiple platforms. For example, I don’t think I could use buildx to "re-package" an image that only supports amd64 as one that supports arm64.</p></div></div></div></div><div class=sect1><h2 id=_migrating_docker_images_and_projects>Migrating Docker images and projects</h2><div class=sectionbody><div class=paragraph><p>The biggest learning for Docker thus far is that the chip operates entirely differently, so unless the technology explicitly supports both, images built specifically for one architecture will be incompatible with another architecture. Therefore, my old Docker images will not build or run on my new machine. Ugh! However, mine only required a few small tweaks to get them back to running state.</p></div><div class=paragraph><p>First, I needed to find any Docker images I had to update. I post most of <a href="https://github.com/JMHReif?tab=repositories&q=docker&type=&language=&sort=" target=_blank rel=noopener>my Dockerfiles</a> to Github, anyway, so I copied those locally to make changes.</p></div><div class=paragraph><p>I’ve done projects with MariaDB, MongoDB, and Neo4j. These are the images I will need to check to see if they support multi-architecture. From earlier in this post, we know MariaDB supports both amd64 and arm64, so I just needed to rebuild the image to pull the current version of the MariaDB base image. That one didn’t take long. MongoDB is also a multi-architecture image (see tags on <a href=https://hub.docker.com/_/mongo target=_blank rel=noopener>Docker Hub image</a>), so I did the same as with Maria. Neo4j was the only one different because the <a href=https://hub.docker.com/_/neo4j target=_blank rel=noopener>official image</a> does not support multiple platforms - only amd64. So, I had to update the Dockerfile to pull the <a href=https://hub.docker.com/r/neo4j/neo4j-arm64-experimental target=_blank rel=noopener>Neo4j arm64 image</a>, then rebuild the container. It wasn’t difficult and didn’t cause any problems. It was just a quick code change before it was up and running, too.</p></div></div></div><div class=sect1><h2 id=_wrapping_up>Wrapping up!</h2><div class=sectionbody><div class=paragraph><p>While everything we’ve covered so far seems pretty minor, I wasn’t entirely sure what to expect. I anticipated a more arduous transition - to have to change commands or how I used applications. It caused me to overscrutinize and take longer, thinking it had to be more complex than it was.</p></div><div class=paragraph><p>Some of my applications have recent versions that are optimized for M1 (IntelliJ IDEA and others), and I actually have yet to migrate those. The old versions have worked out-of-the-box straight from the backup of my old laptop, so it hasn’t been urgent. I’m sure updating the apps would give me a performance and optimization boost that I need to try, though. Honestly, the only true impact the M1 transition had for me was that I needed to pull updated base images for my Docker containers and use a different Neo4j base image that supported arm64.</p></div><div class=paragraph><p>Whether you are curious about multi-platform support or debating a platform switch, maybe my migration experiences showed that there may actually be very little you have to change. Some environments and workloads might be more impacted than others, but at least for myself, the transition was unexpectedly smooth. I hope that any potential migrations you experience are just as smooth. :)</p></div><div class=paragraph><p>Happy coding!</p></div></div></div><div class=sect1><h2 id=_resources>Resources</h2><div class=sectionbody><div class=ulist><ul><li><p>Docker documentation: <a href=https://docs.docker.com/desktop/mac/apple-silicon/ target=_blank rel=noopener>Docker for Apple silicon</a></p></li><li><p>Docker Hub: <a href="https://hub.docker.com/search?type=image&architecture=arm64" target=_blank rel=noopener>Images with support for ARM64 (Apple silicon) platform</a></p></li><li><p>Docker documentation: <a href=https://docs.docker.com/engine/reference/commandline/buildx/ target=_blank rel=noopener>buildx command line tool</a></p></li><li><p>Docker Hub: <a href=https://hub.docker.com/_/mariadb target=_blank rel=noopener>MariaDB image</a> (multi-platform)</p></li><li><p>Docker Hub: <a href=https://hub.docker.com/_/mongo target=_blank rel=noopener>MongoDB image</a> (multi-platform)</p></li><li><p>Docker Hub: <a href=https://hub.docker.com/_/neo4j target=_blank rel=noopener>Neo4j image</a> (amd64/x86 platform)</p></li><li><p>Docker Hub: <a href=https://hub.docker.com/r/neo4j/neo4j-arm64-experimental target=_blank rel=noopener>Neo4j image</a> (arm64/Apple silicon platform)</p></li></ul></div></div></div><ul class=pa0><li class="list di"><a href=/tags/docker class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">docker</a></li><li class="list di"><a href=/tags/m1 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">m1</a></li><li class="list di"><a href=/tags/migrate class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">migrate</a></li><li class="list di"><a href=/tags/learning class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">learning</a></li><li class="list di"><a href=/tags/upgrade class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">upgrade</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/blog/docker-container-upgrade/>Container Upgrade - Experiences Updating Three Databases</a></li><li class=mb2><a href=/blog/java-holds-its-own/>In the Language Wars, Java Holds Its Own</a></li></ul></div></aside></article></main><footer class="bg-dark-green bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://jmhreif.com/>&copy; Jennifer Reif 2023</a><div><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>