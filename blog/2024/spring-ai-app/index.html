<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Spring AI: How to Write GenAI Applications with Java | Jennifer Reif</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Photo credit Generative AI (GenAI) is currently a hot topic in the tech world. It’s a subset of artificial intelligence that focuses on creating new content, such as text, images, or music. One popular type of GenAI component is the Large Language Model (LLM), which can generate human-like text based on a prompt. Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and reliability of generative AI models by grounding them in external knowledge sources."><meta name=generator content="Hugo 0.119.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=https://jmhreif.com/blog/2024/spring-ai-app/><meta property="og:title" content="Spring AI: How to Write GenAI Applications with Java"><meta property="og:description" content="Photo credit Generative AI (GenAI) is currently a hot topic in the tech world. It’s a subset of artificial intelligence that focuses on creating new content, such as text, images, or music. One popular type of GenAI component is the Large Language Model (LLM), which can generate human-like text based on a prompt. Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and reliability of generative AI models by grounding them in external knowledge sources."><meta property="og:type" content="article"><meta property="og:url" content="https://jmhreif.com/blog/2024/spring-ai-app/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-05-01T09:00:00-06:00"><meta property="article:modified_time" content="2024-05-01T09:00:00-06:00"><meta itemprop=name content="Spring AI: How to Write GenAI Applications with Java"><meta itemprop=description content="Photo credit Generative AI (GenAI) is currently a hot topic in the tech world. It’s a subset of artificial intelligence that focuses on creating new content, such as text, images, or music. One popular type of GenAI component is the Large Language Model (LLM), which can generate human-like text based on a prompt. Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and reliability of generative AI models by grounding them in external knowledge sources."><meta itemprop=datePublished content="2024-05-01T09:00:00-06:00"><meta itemprop=dateModified content="2024-05-01T09:00:00-06:00"><meta itemprop=wordCount content="2479"><meta itemprop=keywords content="genai,rag,spring-ai,neo4j,vector,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Spring AI: How to Write GenAI Applications with Java"><meta name=twitter:description content="Photo credit Generative AI (GenAI) is currently a hot topic in the tech world. It’s a subset of artificial intelligence that focuses on creating new content, such as text, images, or music. One popular type of GenAI component is the Large Language Model (LLM), which can generate human-like text based on a prompt. Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and reliability of generative AI models by grounding them in external knowledge sources."></head><body class="ma0 avenir bg-near-white"><header class="cover bg-top" style=background-image:url(https://jmhreif.com/img/unsplash-ai-chip.jpg)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jennifer Reif</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/abstracts/ title="Abstracts page">Abstracts</a></li></ul><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank rel=noopener class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank rel=noopener class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.podbean.com/ target=_blank rel=noopener class="podcast ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="podcast link" aria-label="follow on podcast——Opens in a new window"><span class=icon><svg width="1200pt" height="1200pt" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg"><path d="m6e2 62.484c-296.48.0-537.52 241.03-537.52 537.52s240.98 537.52 537.52 537.52c296.48.0 537.52-240.98 537.52-537.52.0-296.48-241.03-537.52-537.52-537.52zm-155.02 305.02c0-85.5 69.516-155.02 155.02-155.02S755.02 282 755.02 367.504v234.98c0 85.5-69.516 155.02-155.02 155.02s-155.02-69.516-155.02-155.02zm192.52 516.52v66c0 20.484-17.016 37.5-37.5 37.5s-37.5-17.016-37.5-37.5v-66C408 865.508 288 734.024 288 574.504c0-20.484 17.016-37.5 37.5-37.5s37.5 17.016 37.5 37.5c0 130.5 106.5 237 237 237s237-106.5 237-237c0-20.484 17.016-37.5 37.5-37.5s37.5 17.016 37.5 37.5c0 159.52-120 291-274.5 309.52z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Blog</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/intent/tweet?url=https://jmhreif.com/blog/2024/spring-ai-app/&amp;text=Spring%20AI:%20How%20to%20Write%20GenAI%20Applications%20with%20Java" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://jmhreif.com/blog/2024/spring-ai-app/&amp;title=Spring%20AI:%20How%20to%20Write%20GenAI%20Applications%20with%20Java" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Spring AI: How to Write GenAI Applications with Java</h1><time class="f6 mv4 dib tracked" datetime=2024-05-01T09:00:00-06:00>May 1, 2024</time>
<span class="f6 mv4 dib tracked">- 12 minutes read</span>
<span class="f6 mv4 dib tracked">- 2479 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><div class=paragraph><small><i><a href="https://unsplash.com/photos/a-computer-chip-with-the-letter-a-on-top-of-it-eGGFZ5X2LnA?utm_content=creditShareLink&amp;utm_medium=referral&amp;utm_source=unsplash">Photo credit</a></i></small></div><div class=paragraph><p>Generative AI (GenAI) is currently a hot topic in the tech world. It’s a subset of artificial intelligence that focuses on creating new content, such as text, images, or music. One popular type of GenAI component is the Large Language Model (LLM), which can generate human-like text based on a prompt. Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and reliability of generative AI models by grounding them in external knowledge sources. While most GenAI applications and related content are centered around Python and its ecosystem, what if you want to write a GenAI application in Java?</p></div><div class=paragraph><p>In this blog post, we’ll look at how to write GenAI applications with Java using the Spring AI framework and utilize RAG for improving answers.</p></div><div class=sect1><h2 id=_what_is_spring_ai>What is Spring AI?</h2><div class=sectionbody><div class=paragraph><p>Spring AI is a framework for building generative AI applications in Java. It provides a set of tools and utilities for working with generative AI models and architectures, such as large language models (LLMs) and retrieval augmented generation (RAG). Spring AI is built on top of the Spring Framework, which is a popular Java framework for building enterprise applications, allowing those already familiar with or involved in the Spring ecosystem the ability to incorporate GenAI strategies to their already existing applications and workflow.</p></div><div class=paragraph><p>There are also other options for GenAI in Java, such as Langchain4j, but we’ll focus on Spring AI for this post.</p></div></div></div><div class=sect1><h2 id=_creating_a_project>Creating a project</h2><div class=sectionbody><div class=paragraph><p>To get started with Spring AI, you’ll need to either create a new project or add the appropriate dependencies to an existing project. You can create a new project using the Spring Initializr at <a href=https://start.spring.io/ class=bare>https://start.spring.io/</a>, which is a web-based tool for generating Spring Boot projects.</p></div><div class=paragraph><p>When creating a new project, you’ll need to add the following dependencies:</p></div><div class=ulist><ul><li><p>Spring Web</p></li><li><p>OpenAI (or other LLM model, such as Mistral, Ollama, etc.)</p></li><li><p>Neo4j Vector Database (other vector database options also available)</p></li><li><p>Spring Data Neo4j</p></li></ul></div><div class=paragraph><p>If you’re adding these dependencies manually to an existing project, you can see the dependency details in <a href=https://github.com/JMHReif/springai-goodreads target=_blank rel=noopener>today’s related Github repository</a>.</p></div><div class=paragraph><p>The Spring Web dependency allows us to create a REST API for our GenAI application. We need the OpenAI dependency to access the OpenAI model, which is a popular LLM. The Neo4j Vector Database dependency allows us to store and query vectors, which are used for similarity searches. Finally, adding the Spring Data Neo4j dependency provides support for working with Neo4j databases in Spring applications, allowing us to run Cypher queries in Neo4j and map entities to Java objects.</p></div><div class=paragraph><p>Go ahead and generate the project, and then open it in your favorite IDE. Looking at the <code>pom.xml</code> file, you should see that the milestone repository is included. Since Spring AI is not a general-availability release yet, we need to include the milestone repository to get the pre-release version of the dependencies.</p></div></div></div><div class=sect1><h2 id=_a_bit_of_boilerplate>A bit of boilerplate</h2><div class=sectionbody><div class=paragraph><p>First thing that we need is a Neo4j database. I like to use the <a href=https://dev.neo4j.com/aura-java target=_blank rel=noopener>Neo4j Aura free tier</a> because the instance is managed for me, but there are also Docker images and other methods.</p></div><div class=paragraph><p>Depending on the LLM model you chose, you will also need an API key. For OpenAI, you can get one by signing up at <a href=https://platform.openai.com/signup target=_blank rel=noopener>OpenAI</a>.</p></div><div class=paragraph><p>Once you have a Neo4j database and an API key, you can set up the config in the <code>application.properties</code> file. Here’s an example of what that might look like:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-properties data-lang=properties>spring.ai.openai.api-key=&lt;YOUR API KEY HERE&gt;
spring.neo4j.uri=&lt;NEO4J URI HERE&gt;
spring.neo4j.authentication.username=&lt;NEO4J USERNAME HERE&gt;
spring.neo4j.authentication.password=&lt;NEO4J PASSWORD HERE&gt;
spring.data.neo4j.database=&lt;NEO4J DATABASE NAME HERE&gt;</code></pre></div></div><div class=paragraph><p>Note: It’s a good idea to keep sensitive information like API keys and passwords in environment variables or other location external to the application. To create environment variables, you can use the <code>export</code> command in the terminal or set them in your IDE.</p></div><div class=paragraph><p>We can set up <a href=https://www.baeldung.com/spring-bean target=_blank rel=noopener>Spring Beans</a> for the OpenAI client and the Neo4j vector store that will allow us to access necessary components wherever we need them in our application.</p></div><div class=paragraph><p>We can put these in our <code>SpringAiApplication</code> class by adding the following code to the class:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>@Bean
public EmbeddingModel embeddingModel() {
	return new OpenAiEmbeddingModel(new OpenAiApi(System.getenv(&#34;SPRING_AI_OPENAI_API_KEY&#34;)));
}

@Bean
public Neo4jVectorStore vectorStore(Driver driver, EmbeddingModel embeddingModel) {
	return new Neo4jVectorStore(driver, embeddingModel,
			Neo4jVectorStore.Neo4jVectorStoreConfig.builder()
					.withLabel(&#34;Review&#34;)
					.withIndexName(&#34;review-text&#34;)
					.build(), true);
}</code></pre></div></div><div class=paragraph><p>The <code>EmbeddingClient</code> bean creates a client for the OpenAI API and passes in our API key environment variable. Lastly, the <code>Neo4jVectorStore</code> bean configures Neo4j as the store for embeddings (vectors). We customize the configuration by specifying the label for the nodes that will store the embeddings, as Spring’s default looks for <code>Document</code> entities. We also specify our index name for the embeddings (default is <code>spring-ai-document-index</code>).</p></div></div></div><div class=sect1><h2 id=_data_set>Data set</h2><div class=sectionbody><div class=paragraph><p>For this example, we’ll use a dataset of books and reviews from Goodreads. You can pull a curated version of the dataset from <a href=https://github.com/JMHReif/graph-demo-datasets/blob/main/goodreadsUCSD/ai-embeddings/ai-load-data.cypher target=_blank rel=noopener>here</a>. The dataset contains information about books, as well as related reviews.</p></div><div class=paragraph><p>I have already generated embeddings using OpenAI’s API, so if you want to generate your own, you will need to comment out the <a href=https://github.com/JMHReif/graph-demo-datasets/blob/main/goodreadsUCSD/ai-embeddings/ai-load-data.cypher#L92 target=_blank rel=noopener>final Cypher statement in the script</a> and instead run the <code>generate-embeddings.py</code> script (or your custom version) to generate and load the review embeddings to Neo4j.</p></div></div></div><div class=sect1><h2 id=_application_model>Application model</h2><div class=sectionbody><div class=paragraph><p>Next, we need to create a domain model in our application to map to our database model. In this example, we’ll create a <code>Book</code> entity that represents a book node. We’ll also create a <code>Review</code> entity that represents a review of a book. The <code>Review</code> entity will have an embedding (vector) associated with it, which we’ll use for similarity searches.</p></div><div class=paragraph><p>These entities are standard Spring Data Neo4j code, so I won’t show the code here. However, full code for each class is available in the Github repository - <a href=https://github.com/JMHReif/springai-goodreads/blob/main/src/main/java/com/jmhreif/springaigoodreads/Book.java target=_blank rel=noopener>Book class</a>, <a href=https://github.com/JMHReif/springai-goodreads/blob/main/src/main/java/com/jmhreif/springaigoodreads/Review.java target=_blank rel=noopener>Review class</a>.</p></div><div class=paragraph><p>We also need a repository interface defined so that we can interact with the database. While we will need to define a custom query, we’ll come back and add that in a bit later.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>public interface BookRepository extends Neo4jRepository&lt;Book, String&gt; {
}</code></pre></div></div><div class=paragraph><p>Next, the core of this application where all the magic happens is the controller class. This class will contain the logic for taking a search phrase provided by the user and calling the <code>Neo4jVectorStore</code> to calculate and return the most similar ones. We can then pass those similar reviews into a Neo4j query to retrieve connected entities, providing additional context in the prompt for the LLM. It will use all the information provided to respond with some similar book recommendations for the original searched phrase.</p></div></div></div><div class=sect1><h2 id=_controller>Controller</h2><div class=sectionbody><div class=paragraph><p>Our controller class contains a couple of common annotations, to start. We’ll also inject the <code>Neo4jVectorStore</code> and <code>BookRepository</code> beans that we defined earlier, as well as the <code>OpenAiChatClient</code> for our embedding client.</p></div><div class=paragraph><p>The next thing is to define a string for our prompt. This is the text that we will pass to the LLM to generate the response. We’ll use the search phrase provided by the user and the similar reviews we find in the database to populate our prompt parameters in a few minutes. Next, we define the constructor for the controller class, which will inject the necessary beans.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>@RestController
@RequestMapping(&#34;/&#34;)
public class BookController {
    private final ChatClient client;
    private final Neo4jVectorStore vectorStore;
    private final BookRepository repo;

    String prompt = &#34;&#34;&#34;
            You are a book expert providing recommendations from high-quality book information in the CONTEXT section.
            Please summarize the books provided in the context section.

            CONTEXT:
            {context}

            PHRASE:
            {searchPhrase}
            &#34;&#34;&#34;;

    public BookController(ChatClient.Builder builder, Neo4jVectorStore vectorStore, BookRepository repo) {
        this.client = builder.build();
        this.vectorStore = vectorStore;
        this.repo = repo;
    }

    //Retrieval Augmented Generation with Neo4j - vector search + retrieval query for related context
    @GetMapping(&#34;/rag&#34;)
    public String generateResponseWithContext(@RequestParam String searchPhrase) {
        List&lt;Document&gt; results = vectorStore.similaritySearch(SearchRequest.query(searchPhrase).withTopK(10));

        //more code shortly!
    }
}</code></pre></div></div><div class=paragraph><p>Finally, we define a method that will be called when a user makes a GET request to the <code>/rag</code> endpoint. This method will first take a search phrase as a query parameter and pass that to the vector store’s <code>similaritySearch()</code> method to find similar reviews. I have also added a couple of customization filters to the query by limiting to the top five results (<code>.withTopK(5)</code>) and only pull the most similar results (<code>withSimilarityThreshold(0.8)</code>).</p></div><div class=paragraph><p>The actual implementation of Spring AI’s <code>similaritySearch()</code> method is below.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>public List&lt;Document&gt; similaritySearch(SearchRequest request) {
    Assert.isTrue(request.getTopK() &gt; 0, &#34;The number of documents to returned must be greater than zero&#34;);
    Assert.isTrue(request.getSimilarityThreshold() &gt;= 0.0 &amp;&amp; request.getSimilarityThreshold() &lt;= 1.0, &#34;The similarity score is bounded between 0 and 1; least to most similar respectively.&#34;);
    Value embedding = Values.value(toFloatArray(this.embeddingModel.embed(request.getQuery())));
    Session session = this.driver.session(this.config.sessionConfig);

    List var6;
    try {
        StringBuilder condition = new StringBuilder(&#34;score &gt;= $threshold&#34;);
        if (request.hasFilterExpression()) {
            condition.append(&#34; AND &#34;).append(this.filterExpressionConverter.convertExpression(request.getFilterExpression()));
        }

        String query = &#34;CALL db.index.vector.queryNodes($indexName, $numberOfNearestNeighbours, $embeddingValue)\nYIELD node, score\nWHERE %s\nRETURN node, score&#34;.formatted(condition);
        var6 = session.run(query, Map.of(&#34;indexName&#34;, this.config.indexNameNotSanitized, &#34;numberOfNearestNeighbours&#34;, request.getTopK(), &#34;embeddingValue&#34;, embedding, &#34;threshold&#34;, request.getSimilarityThreshold())).list(this::recordToDocument);
    } catch (Throwable var8) {
        if (session != null) {
            try {
                session.close();
            } catch (Throwable var7) {
                var8.addSuppressed(var7);
            }
        }

        throw var8;
    }

    if (session != null) {
        session.close();
    }

    return var6;
}</code></pre></div></div><div class=paragraph><p>Then, we map the similar <code>Review</code> nodes back to <code>Document</code> entities because Spring AI expects a general document type. The <code>Neo4jVectorStore</code> class contains methods to convert <code>Document</code> to a custom record, as well as the reverse for record to <code>Document</code> conversion. The actual implementation for those methods is shown next.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>private Map&lt;String, Object&gt; documentToRecord(Document document) {
    List&lt;Double&gt; embedding = this.embeddingModel.embed(document);
    document.setEmbedding(embedding);
    HashMap&lt;String, Object&gt; row = new HashMap();
    row.put(&#34;id&#34;, document.getId());
    HashMap&lt;String, Object&gt; properties = new HashMap();
    properties.put(&#34;text&#34;, document.getContent());
    document.getMetadata().forEach((k, v) -&gt; {
        properties.put(&#34;metadata.&#34; + k, Values.value(v));
    });
    row.put(&#34;properties&#34;, properties);
    row.put(this.config.embeddingProperty, Values.value(toFloatArray(embedding)));
    return row;
}

private Document recordToDocument(Record neoRecord) {
    Node node = neoRecord.get(&#34;node&#34;).asNode();
    float score = neoRecord.get(&#34;score&#34;).asFloat();
    HashMap&lt;String, Object&gt; metaData = new HashMap();
    metaData.put(&#34;distance&#34;, 1.0F - score);
    node.keys().forEach((key) -&gt; {
        if (key.startsWith(&#34;metadata.&#34;)) {
            metaData.put(key.substring(key.indexOf(&#34;.&#34;) + 1), node.get(key).asObject());
        }

    });
    return new Document(node.get(this.config.idProperty).asString(), node.get(&#34;text&#34;).asString(), Map.copyOf(metaData));
}</code></pre></div></div><div class=paragraph><p>Back in our controller method for book recommendations, we now have similar reviews for the user’s searched phrase. But reviews (and their accompanying text) aren’t really helpful in giving us book recommendations. So now we need to run a query in Neo4j to retrieve the related books for those reviews. This is the retrieval augmented generation (RAG) piece of the application.</p></div><div class=paragraph><p>Let’s write the query in the <code>BookRepository</code> interface to find the books associated with those reviews.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>public interface BookRepository extends Neo4jRepository&lt;Book, String&gt; {
    @Query(&#34;MATCH (b:Book)&lt;-[rel:WRITTEN_FOR]-(r:Review) &#34; +
            &#34;WHERE r.id IN $reviewIds &#34; +
            &#34;AND r.text &lt;&gt; &#39;RTC&#39; &#34; +
            &#34;RETURN b, collect(rel), collect(r);&#34;)
    List&lt;Book&gt; findBooks(List&lt;String&gt; reviewIds);
}</code></pre></div></div><div class=paragraph><p>In the query, we pass in the ids of the reviews from the similarity search (<code>$reviewIds</code>) and pull the <code>Review → Book</code> pattern for those reviews. We also filter out any reviews that have the text 'RTC' (which is a placeholder for reviews that don’t have text). We then return the <code>Book</code> nodes, the relationships, and the <code>Review</code> nodes.</p></div><div class=paragraph><p>Now we need to call that method in our controller and pass the results to a prompt template. We will pass that to the LLM to generate a response with a book recommendation list based on the user’s search phrase (we hope!). :)</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>//Retrieval Augmented Generation with Neo4j - vector search + retrieval query for related context
@GetMapping(&#34;/rag&#34;)
public String generateResponseWithContext(@RequestParam String searchPhrase) {
    List&lt;Document&gt; results = vectorStore.similaritySearch(SearchRequest.query(searchPhrase).withTopK(10));

    List&lt;Book&gt; bookList = repo.findBooks(results.stream().map(Document::getId).collect(Collectors.toList()));
    System.out.println(&#34;--- Book list ---&#34;);
    System.out.println(bookList);

    var template = new PromptTemplate(prompt, Map.of(&#34;context&#34;, bookList.stream().map(b -&gt; b.toString()).collect(Collectors.joining(&#34;\n&#34;)), &#34;searchPhrase&#34;, searchPhrase));
    System.out.println(&#34;----- PROMPT -----&#34;);
    System.out.println(template.render());

    return client.prompt(template.create()).call().content();

}</code></pre></div></div><div class=paragraph><p>Starting right after the similarity search, we call our new <code>findBooks()</code> method and pass in the list of review ids from the similarity search. The retrieval query returns to a list of books called <code>bookList</code>. Next, we create a prompt template with the prompt string, the context data from the graph, and the user’s search phrase, mapping the <code>context</code> and <code>searchPhrase</code> prompt parameters to the graph data (list with each item on new line) and the user’s search phrase, respectively. I have also added a <code>System.out.println()</code> to print the prompt to the console so that we can see what is getting passed to the LLM.</p></div><div class=paragraph><p>Finally, we call the template’s <code>create()</code> method to generate the response from the LLM. The returning JSON object has a <code>contents</code> key that contains the response string with the list of book recommendations based on the user’s search phrase.</p></div><div class=paragraph><p>Let’s test it out!</p></div></div></div><div class=sect1><h2 id=_running_the_application>Running the application</h2><div class=sectionbody><div class=paragraph><p>To run our Goodreads AI application, you can use the <code>./mvnw spring-boot:run</code> command in the terminal. Once the application is running, you can make a GET request to the <code>/rag</code> endpoint with a search phrase as a query parameter. Some examples are included next.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>http &#34;:8080/rag?searchPhrase=happy%20ending&#34;
http &#34;:8080/rag?searchPhrase=encouragement&#34;
http &#34;:8080/rag?searchPhrase=high%tech&#34;
http &#34;:8080/rag?searchPhrase=caffeine&#34;</code></pre></div></div><div class=sect2><h3 id=_sample_call_and_output_full_prompt>Sample call and output + full prompt</h3><div class=paragraph><p>Call and returned book recommendations:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>jenniferreif@elf-lord springai-goodreads % http &#34;:8080/rag?searchPhrase=encouragement&#34;

The books recommended in the context section are all inspirational and encouraging reads. They include &#34;An Autobiography,&#34; &#34;The Greatest Gift,&#34; &#34;The Cross and the Switchblade,&#34; &#34;David and Goliath,&#34; &#34;The Art of Recklessness,&#34; &#34;90 Minutes in Heaven,&#34; &#34;Just Kids,&#34; and &#34;The Five People You Meet in Heaven.&#34; These books offer great insight, hope, and encouragement to readers looking for uplifting stories and messages.</code></pre></div></div><div class=paragraph><p>Application log output:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>----- PROMPT -----
You are a book expert providing recommendations from high-quality book information in the CONTEXT section.
Please summarize the books provided in the context section.

CONTEXT:
Book[book_id=125441, title=An Autobiography, isbn=0717806677, isbn13=9780717806676, reviewList=[Review[id=d664f3888ecdfd78ec50606fe5f9b58c, text=Inspiring, rating=5]]]
Book[book_id=1488663, title=The Greatest Gift: The Original Story That Inspired the Christmas Classic It&#39;s a Wonderful Life, isbn=0670862045, isbn13=9780670862047, reviewList=[Review[id=b74851666f2ec1841ca5876d977da872, text=Inspiring, rating=4]]]
Book[book_id=772852, title=The Cross and the Switchblade, isbn=0515090255, isbn13=9780515090253, reviewList=[Review[id=f70c68721a0654462bcc6cd68e3259bd, text=encouraging, rating=4]]]
Book[book_id=15751404, title=David and Goliath: Underdogs, Misfits, and the Art of Battling Giants, isbn=0316204366, isbn13=9780316204361, reviewList=[Review[id=8c8bf791101b405c2cd134da193d2701, text=Inspiring, rating=4]]]
Book[book_id=7517330, title=The Art of Recklessness: Poetry as Assertive Force and Contradiction, isbn=1555975623, isbn13=9781555975623, reviewList=[Review[id=2df3600d488e182a3ef06bff7fc82eb8, text=Great insight, great encouragement, and great company., rating=4]]]
Book[book_id=89375, title=90 Minutes in Heaven: A True Story of Death and Life, isbn=0800759494, isbn13=9780800759490, reviewList=[Review[id=85ef80e09c64ebd013aeebdb7292eda9, text=inspiring &amp; hope filled, rating=5]]]
Book[book_id=341879, title=Just Kids, isbn=006621131X, isbn13=9780066211312, reviewList=[Review[id=3eab2a67ac0bde179dd017014cb212bf, text=Inspiring, rating=5], Review[id=d731490fcfefe6547e459bdff204df4a, text=inspiring., rating=5]]]
Book[book_id=3431, title=The Five People You Meet in Heaven, isbn=1401308589, isbn13=9781401308582, reviewList=[Review[id=3ad8018734f177fd1fe47e6ada1c5df8, text=inspirational, rating=4], Review[id=2b94facb74fe09afd1fd54f0db2251c8, text=Inspiring, rating=5]]]

PHRASE:
encouragement</code></pre></div></div><div class=paragraph><p>We can see that the LLM generated a response with a list of book recommendations based on the books found in the database (CONTEXT section of prompt). The results of the similarity search + graph retrieval query for the user’s search phrase are in the prompt, and the LLM’s answer uses that data for a reponse.</p></div></div></div></div><div class=sect1><h2 id=_wrapping_up>Wrapping Up!</h2><div class=sectionbody><div class=paragraph><p>In today’s post, you learned how to build a GenAI application with Spring AI in Java. We used the OpenAI model to generate book recommendations based on a user’s search phrase. We used the Neo4j Vector Database to store and query vectors for similarity searches. We also mapped the domain model to our database model, wrote a repository interface to interact with the database, and created a controller class to handle user requests and generate responses.</p></div><div class=paragraph><p>I hope this post helps to get you started with Spring AI and beyond. Happy coding!</p></div></div></div><div class=sect1><h2 id=_resources>Resources</h2><div class=sectionbody><div class=ulist><ul><li><p>Code (Github repository): <a href=https://github.com/JMHReif/springai-goodreads target=_blank rel=noopener>Spring AI Goodreads</a></p></li><li><p>Documentation: <a href=https://docs.spring.io/spring-ai/reference/index.html target=_blank rel=noopener>Spring AI</a></p></li><li><p>Webpage: <a href=https://spring.io/projects/spring-ai target=_blank rel=noopener>Spring AI project</a></p></li><li><p>API: <a href=https://docs.spring.io/spring-ai/docs/0.8.1/api/org/springframework/ai/vectorstore/Neo4jVectorStore.html#similaritySearch(org.springframework.ai.vectorstore.SearchRequest) target=_blank rel=noopener>Spring AI - Neo4jVectorStore</a></p></li></ul></div></div></div><ul class=pa0><li class="list di"><a href=/tags/genai/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">genai</a></li><li class="list di"><a href=/tags/rag/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">rag</a></li><li class="list di"><a href=/tags/spring-ai/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring-ai</a></li><li class="list di"><a href=/tags/neo4j/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">neo4j</a></li><li class="list di"><a href=/tags/vector/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">vector</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/blog/2024/rag-demo-retrieval/>Implementing RAG: How to write a graph retrieval query in LangChain</a></li><li class=mb2><a href=/blog/2024/cypher-property-data-types/>Cypher Sleuthing: How to Get Data Types of Properties in Neo4j</a></li><li class=mb2><a href=/blog/2021/docker-container-upgrade/>Container Upgrade - Experiences Updating Three Databases</a></li><li class=mb2><a href=/blog/2021/migrate-sdn-part3/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 3</a></li><li class=mb2><a href=/blog/2021/java17-graph-explore/>Java 17: Explore the newly-released Java version in a graph database!</a></li><li class=mb2><a href=/blog/2021/migrate-sdn-part2/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2</a></li><li class=mb2><a href=/blog/2021/migrate-sdn-part1/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 1</a></li><li class=mb2><a href=/blog/2021/create-data-marvel-sdn/>Create a Data Marvel with Spring Data Neo4j</a></li></ul></div></aside></article></main><footer class="bg-dark-green bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://jmhreif.com/>&copy; Jennifer Reif 2024</a><div><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank rel=noopener class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank rel=noopener class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.podbean.com/ target=_blank rel=noopener class="podcast ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="podcast link" aria-label="follow on podcast——Opens in a new window"><span class=icon><svg width="1200pt" height="1200pt" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg"><path d="m6e2 62.484c-296.48.0-537.52 241.03-537.52 537.52s240.98 537.52 537.52 537.52c296.48.0 537.52-240.98 537.52-537.52.0-296.48-241.03-537.52-537.52-537.52zm-155.02 305.02c0-85.5 69.516-155.02 155.02-155.02S755.02 282 755.02 367.504v234.98c0 85.5-69.516 155.02-155.02 155.02s-155.02-69.516-155.02-155.02zm192.52 516.52v66c0 20.484-17.016 37.5-37.5 37.5s-37.5-17.016-37.5-37.5v-66C408 865.508 288 734.024 288 574.504c0-20.484 17.016-37.5 37.5-37.5s37.5 17.016 37.5 37.5c0 130.5 106.5 237 237 237s237-106.5 237-237c0-20.484 17.016-37.5 37.5-37.5s37.5 17.016 37.5 37.5c0 159.52-120 291-274.5 309.52z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>