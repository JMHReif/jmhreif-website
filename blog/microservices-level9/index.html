<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Journeys in Java, Level 9: Docker compose all the things | Jennifer Reif</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Photo credit  Our microservices project contains quite a few pieces now. We have two databases, three API services, a user-view service for books, and a service to host our configuration. With so many pieces to manage, it would be nice to have something that orchestrates the individual services into a system, such as Docker Compose.
 Back in our Level 5 rendition, we did exactly this for our smaller version of the project."><meta name=generator content="Hugo 0.85.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Journeys in Java, Level 9: Docker compose all the things"><meta property="og:description" content="Photo credit  Our microservices project contains quite a few pieces now. We have two databases, three API services, a user-view service for books, and a service to host our configuration. With so many pieces to manage, it would be nice to have something that orchestrates the individual services into a system, such as Docker Compose.
 Back in our Level 5 rendition, we did exactly this for our smaller version of the project."><meta property="og:type" content="article"><meta property="og:url" content="https://jmhreif.com/blog/microservices-level9/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-09-21T09:00:00-06:00"><meta property="article:modified_time" content="2022-09-21T09:00:00-06:00"><meta itemprop=name content="Journeys in Java, Level 9: Docker compose all the things"><meta itemprop=description content="Photo credit  Our microservices project contains quite a few pieces now. We have two databases, three API services, a user-view service for books, and a service to host our configuration. With so many pieces to manage, it would be nice to have something that orchestrates the individual services into a system, such as Docker Compose.
 Back in our Level 5 rendition, we did exactly this for our smaller version of the project."><meta itemprop=datePublished content="2022-09-21T09:00:00-06:00"><meta itemprop=dateModified content="2022-09-21T09:00:00-06:00"><meta itemprop=wordCount content="2822"><meta itemprop=keywords content="java,microservices,applications,development,spring-boot,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Journeys in Java, Level 9: Docker compose all the things"><meta name=twitter:description content="Photo credit  Our microservices project contains quite a few pieces now. We have two databases, three API services, a user-view service for books, and a service to host our configuration. With so many pieces to manage, it would be nice to have something that orchestrates the individual services into a system, such as Docker Compose.
 Back in our Level 5 rendition, we did exactly this for our smaller version of the project."></head><body class="ma0 avenir bg-near-white"><header class="cover bg-top" style=background-image:url(https://jmhreif.com/img/microservices-lvl9/unsplash-bridge-waterfall.jpeg)><div class="pb3-m pb6-l bg-black-60"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jennifer Reif</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/abstracts/ title="Abstracts page">Abstracts</a></li></ul><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">BLOG</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://jmhreif.com/blog/microservices-level9/&text=Journeys%20in%20Java,%20Level%209:%20Docker%20compose%20all%20the%20things" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://jmhreif.com/blog/microservices-level9/&title=Journeys%20in%20Java,%20Level%209:%20Docker%20compose%20all%20the%20things" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Journeys in Java, Level 9: Docker compose all the things</h1><time class="f6 mv4 dib tracked" datetime=2022-09-21T09:00:00-06:00>September 21, 2022</time>
<span class="f6 mv4 dib tracked">- 14 minutes read</span>
<span class="f6 mv4 dib tracked">- 2822 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><div class=paragraph><small><i><a href="https://unsplash.com/photos/r7c2b7E85M4?utm_source=unsplash&utm_medium=referral&utm_content=creditShareLink">Photo credit</a></i></small></div><div class=paragraph><p>Our microservices project contains quite a few pieces now. We have two databases, three API services, a user-view service for books, and a service to host our configuration. With so many pieces to manage, it would be nice to have something that orchestrates the individual services into a system, such as Docker Compose.</p></div><div class=paragraph><p>Back in our <a href=https://jmhreif.com/blog/microservices-level5/ target=_blank rel=noopener>Level 5</a> rendition, we did exactly this for our smaller version of the project. Now that we have expanded our services, we need to add those new pieces into the existing Docker Compose management umbrella.</p></div><div class=paragraph><p>I expected this step of the process to be much quicker, especially since I had done it before. However, there were several obstacles I encountered that took much longer to solve than anticipated. I’ll do my best to cover those thoroughly here and avoid future problems for both myself and others!</p></div><div class=sect1><h2 id=_architecture>Architecture</h2><div class=sectionbody><div class=paragraph><p>We built this project from scratch with a <a href=https://jmhreif.com/blog/microservices-level1/ target=_blank rel=noopener>rudimentary scope and functionality</a> and have slowly expanded the complexity. In the <a href=https://jmhreif.com/blog/microservices-level8/ target=_blank rel=noopener>most recent step</a>, we had a few services managed by Docker Compose and a few managed manually. This is because we wanted to avoid adding unnecessary complexity with an orchestration layer until we were certain service communication was working without it.</p></div><div class=paragraph><p>Now that things are operating well independently, we can migrate the working services so that everything is handled by Docker Compose.</p></div><div class=paragraph><p>Updated architecture:</p></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/microservices-level9.png alt="microservices level9"></div></div><div class=paragraph><p>There is a small grey border around each service indicating a containerized application. Services are tied to other services through arrows with some boxes to show the type of objects passed back and forth. The larger grey box encompassing everything represents how Docker Compose is orchestrating all of services as a single unit.</p></div></div></div><div class=sect1><h2 id=_prepping_applications>Prepping applications</h2><div class=sectionbody><div class=paragraph><p>The first step was to integrate the config-service to Docker Compose. This service handles database credentials to both MongoDB and Neo4j. I expected this step to be the trickiest, but in reality, getting <code>service1</code> to interact with the config service proved to be the biggest hurdle, and the one I spent the most time on. Once that was operating smoothly, adding the rest of the services took very little time.</p></div><div class=paragraph><p>Let’s walk through the steps!</p></div></div></div><div class=sect1><h2 id=_goodreads_config>Goodreads-config</h2><div class=sectionbody><div class=paragraph><p>First, we need to containerize the application using a Dockerfile. After copying/pasting from another service, I found out that my base <a href=https://hub.docker.com/_/openjdk target=_blank rel=noopener><code>openjdk</code> image</a> was deprecated. There were a few suggestions for alternatives, but went with <a href=https://hub.docker.com/u/azul target=_blank rel=noopener>Azul’s image</a> as the <a href=https://github.com/JMHReif/microservices-level9/blob/main/config-server/Dockerfile#L3 target=_blank rel=noopener>new base image</a>.</p></div><div class=paragraph><p>Next, we need to package the application from the service’s directory using <code>mvn clean package</code> and build the Docker image with the containerized application with <code>docker build -t jmreif/goodreads-config .</code> at the command line. Our application is packaged and the Docker image built, so we need to add the service to our <code>docker-compose.yml</code> file.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>version: &#34;3.9&#34;
services:
  #goodreads-db...
  goodreads-config:
    container_name: goodreads-config
    image: jmreif/goodreads-config
    # build: ./config-server
    ports:
      - &#34;8888:8888&#34;
    depends_on:
      - goodreads-db
    environment:
      - SPRING_PROFILES_ACTIVE=native,docker
    volumes:
      - $HOME/Projects/config/microservices-java-config:/config
      - $HOME/Projects/docker/goodreads/config-server/logs:/logs
    networks:
      - goodreads
networks:
  goodreads:</code></pre></div></div><div class=paragraph><p>I temporarily commented out the previous service1, service2, and service3 blocks, so that I could focus on adding each piece individually. The <code>goodreads-config</code> service contains many of the same fields we have used before. I added a commented-out <code>build</code> option test and make changes locally, rather than pulling from the remote image as the parameter above it does. The <code>depends_on</code> option specifies that the database container must be started before this service can start. <strong>Note:</strong> This does not mean that the database container is in a "ready" state, only started.</p></div><div class=paragraph><p>Under the <code>environment</code> block, we have a variable set up for a Spring profile. This allows us to use different credentials, depending on whether we are running in a local test environment or in Docker. The main difference is the use of <code>localhost</code> to connect to other services in a local environment (specified by <code>native</code> profile), versus container names in a Docker environment (profile: <code>docker</code>). The next option for <code>volumes</code> sets up the location of the config files (for now, in a local <code>config</code> directory) and log files.</p></div><div class=paragraph><p><em>*Note:* I played around with moving the profile variable into the config file, but found out that we need it as a variable in the container (either from the application in <code>application.properties</code> or in docker-compose.yml). Sourcing it from outside the container didn’t cooperate.</em></p></div><div class=paragraph><p>Let’s test what we changed so far!</p></div><div class=sect2><h3 id=_round_1_put_it_to_the_test>Round 1: Put it to the test!</h3><div class=paragraph><p>We can run this much of the system with a single command.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-shell data-lang=shell>docker-compose up -d</code></pre></div></div><div class=paragraph><p><em>*Note:* If you are building local images with the build field in docker-compose.yml, then use the command <code>docker-compose up -d --build</code>. This will build the Docker containers each time on startup from the directories.</em></p></div><div class=paragraph><p>Next, we can test our <code>goodreads-config</code> service by accessing the configuration file it is hosting. We can do this at the command line with <code>curl localhost:8888/mongo-client/docker</code> or using a browser with the URL <code>localhost:8888/mongo-client/docker</code>. This should show something like the screenshot below.</p></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/config-server-test.png alt="config server test"></div></div><div class=paragraph><p>Bring everything back down again with another command.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-shell data-lang=shell>docker-compose down</code></pre></div></div></div></div></div><div class=sect1><h2 id=_goodreads_svc1_interact_with_goodreads_config>Goodreads-svc1: Interact with goodreads-config</h2><div class=sectionbody><div class=paragraph><p>As mentioned above, this was the toughest part to get working, but I learned a few things along the way.</p></div><div class=paragraph><p>We already had Docker Compose managing this service in the previous <a href=https://github.com/JMHReif/microservices-level5 target=_blank rel=noopener>Level 5 version of the code</a>, so we can use that setup with some adjustments.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>version: &#34;3.9&#34;
services:
  #goodreads-db...
  #goodreads-config...
  goodreads-svc1:
    container_name: goodreads-svc1
    image: jmreif/goodreads-svc1:lvl9
    # build: ./service1
    ports:
      - &#34;8081:8081&#34;
    depends_on:
      - goodreads-config
    restart: on-failure
    environment:
      - SPRING_APPLICATION_NAME=mongo-client
      - SPRING_CONFIG_IMPORT=configserver:http://goodreads-config:8888
      - SPRING_PROFILES_ACTIVE=docker
networks:
    - goodreads</code></pre></div></div><div class=paragraph><p>The first several options are the same as our previous services, although I added a tag to the image name to keep a separate image with these updates. The next change is on the <code>depends_on</code> option. Instead of waiting directly for the database container, <code>service1</code> actually depends on the config service (<code>goodreads-config</code>) for the database credentials. The config service then forwards the call with appropriate credentials.</p></div><div class=paragraph><p>On the next line is a new option - <code>restart</code>. This took the longest time for me to debug, but you might remember me mentioning that <a href=https://vsupalov.com/simple-fix-db-not-ready/ target=_blank rel=noopener><code>depends_on</code> only waits for the container to start</a>, not for the service to be ready. It turns out that <code>service1</code> was starting too early, so it would fail to find the configuration. After trying a few different methods, such as building in request retries in the application itself, I discovered that the only working solution was to restart the whole container (or at least the entire application within the container). The most straightforward way to do this was through the <a href=https://docs.docker.com/compose/compose-file/#restart target=_blank rel=noopener><code>restart</code> option in Docker Compose</a>. This solved the startup and configuration issues I was seeing.</p></div><div class=paragraph><p>Lastly, the environment variables specify the application name, location of the config server, and Spring profile. The application name and active profile help the application find the appropriate configuration file on the config server. The <code>SPRING_CONFIG_IMPORT</code> variable tells the container where to look for the config server. I also noticed that these properties did not work correctly if I put them in the config file itself. The values must be accessible within the container, or it would not know where to look.</p></div><div class=sect2><h3 id=_service1_application_changes>Service1: Application Changes</h3><div class=paragraph><p>As I was debugging the restart issues mentioned above, one suggestion to add resiliency to the application and assist with determining errors was to add <a href=https://docs.spring.io/spring-batch/docs/current/reference/html/retry.html target=_blank rel=noopener>Spring Retry</a> capabilities. This allows us to set up guidelines for automatically retrying requests, which is especially helpful when safeguarding against situations like network interruptions. While it didn’t solve the Docker Compose container startup issues, I kept the code to make the application more robust and assist debugging.</p></div><div class=paragraph><p>There wasn’t much code to add, and I followed a colleague’s advice, alongside <a href=https://www.baeldung.com/spring-retry target=_blank rel=noopener>Baeldung’s article</a>.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-xml data-lang=xml>&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;
	&lt;artifactId&gt;spring-retry&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre></div></div><div class=paragraph><p>First, we need the retry dependency, alongside the Spring Boot starter for <a href=https://www.javatpoint.com/spring-boot-aop target=_blank rel=noopener>Aspect-Oriented Programming</a>. I also added Actuator, which will set up endpoints to inspect application health, metrics, and more.</p></div><div class=paragraph><p>Next, we need to <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/src/main/resources/application.properties target=_blank rel=noopener>comment out the local properties</a> in the <code>src/main/resources/application.properties</code> file so that the config server variables don’t conflict with ones we are setting in the container (via <code>docker-compose.yml</code>). Otherwise, it would connect to the container config server, but also try to connect to a local config server. It would continue to retry until it failed, causing the application to crash searching for irrelevant, backup property values. Lesson learned: the retry applied to any properties set, whether in the application or environment variables.</p></div><div class=paragraph><p>Finally, I need to add a few annotations to the application class.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>@SpringBootApplication
@EnableRetry
public class Service1Application {
	....
}

@RestController
@RequestMapping(&#34;/db&#34;)
@AllArgsConstructor
class BookController {
	....

	@Retryable
	@GetMapping(&#34;/books&#34;)
	Flux&lt;Book&gt; getBooks() { return bookRepository.findAll(); }

	@Retryable
	@GetMapping(&#34;/book/{mongoId}&#34;)
	Mono&lt;Book&gt; getBook(@PathVariable String mongoId) { return bookRepository.findById(mongoId); }
}</code></pre></div></div><div class=paragraph><p>The <code>@EnableRetry</code> annotation enables retry functionality in the application. The <code>@Retryable</code> annotation on the two methods tells the application which methods should utilize retry logic. Default configuration for retries is set to try the request up to three times with a delay of one second between each retry. However, we can customize the defaults through properties, annotation parameters for each method, or template configuration.</p></div><div class=paragraph><p>Notice that I did not add retry logic to the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/src/main/java/com/jmhreif/service1/Service1Application.java#L35 target=_blank rel=noopener><code>liveCheck()</code> method</a>. This is because we don’t interact with other services or have other dependencies that might potentially cause flakiness in the requests. If the <code>liveCheck()</code> method does not work, then our application or container is not running.</p></div><div class=paragraph><p>While I was here, we can upgrade the Spring Boot project to use the latest versions of everything, so I modified the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/pom.xml#L8 target=_blank rel=noopener>Spring Boot version</a>, <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/pom.xml#L17 target=_blank rel=noopener>Java version</a>, and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/pom.xml#L18 target=_blank rel=noopener>Spring Cloud version</a> in the <code>pom.xml</code>. I also updated the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service1/Dockerfile#L3 target=_blank rel=noopener>Dockerfile’s base image</a> to the Azul JDK 17, as well.</p></div><div class=paragraph><p>With those changes in place, we will need to re-package the application with <code>mvn clean package -DskipTests=true</code> and rebuild the local Docker container. I also made some tweaks to the config file.</p></div><div class=paragraph><p><em>*Note:* the <code>-DskipTests=true</code> is necessary because it will look for a config server and fail when/if it doesn’t find it.</em></p></div></div><div class=sect2><h3 id=_config_file_mongo_client>Config file: mongo-client</h3><div class=paragraph><p>In the <a href=https://github.com/JMHReif/microservices-level9/blob/main/microservices-java-config/mongo-client.yaml target=_blank rel=noopener>mongo-client configuration file</a> hosted by the config server, I added a couple more properties for opening up Actuator endpoints (for application debugging) and the application name</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-text data-lang=text># Enable all actuator endpoints FOR DEMO PURPOSES ONLY!
management:
  endpoints:
    web:
      exposure:
        include: &#34;*&#34;

spring:
  application:
    name: mongo-client
....</code></pre></div></div></div><div class=sect2><h3 id=_round_2_put_it_to_the_test>Round 2: Put it to the test!</h3><div class=paragraph><p>Let’s run all of the pieces so far - goodreads-db, goodreads-config, goodreads-svc1.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-shell data-lang=shell>docker-compose up -d</code></pre></div></div><div class=paragraph><p><em>*Note:* If you are building local images with the build field in docker-compose.yml, then use the command <code>docker-compose up -d --build</code>. This will build the Docker containers each time on startup from the directories.</em></p></div><div class=paragraph><p>Next, we can test our services with a few endpoints.</p></div><div class=ulist><ul><li><p>Goodreads-config: command line with <code>curl localhost:8888/mongo-client/docker</code>.</p></li><li><p>Goodreads-svc1: command line with <code>curl localhost:8081/db</code>, <code>curl localhost:8081/db/books</code>, and <code>curl localhost:8081/db/book/623a1d969ff4341c13cbcc6b</code> or web browser with only URL.</p></li></ul></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/service1-test.png alt="service1 test"></div></div><div class=paragraph><p>When we are done testing this, we can bring down the system with <code>docker-compose down</code>.</p></div></div></div></div><div class=sect1><h2 id=_goodreads_svc2_interact_with_service1>Goodreads-svc2: Interact with service1</h2><div class=sectionbody><div class=paragraph><p>This service is our user-facing service for interacting with book data. All of the changes made to this service will look familiar because we made the same changes in <code>service1</code>!</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-yaml data-lang=yaml>version: &#34;3.9&#34;
services:
  #goodreads-db...
  #goodreads-config...
  #goodreads-svc1...
  goodreads-svc2:
    container_name: goodreads-svc2
    image: jmreif/goodreads-svc2:lvl9
    # build: ./service2
    ports:
      - &#34;8080:8080&#34;
    depends_on:
      - goodreads-svc1
    restart: on-failure
    environment:
      - BACKEND_HOSTNAME=goodreads-svc1
    networks:
      - goodreads
networks:
    - goodreads</code></pre></div></div><div class=paragraph><p>We only add the <code>restart: on-failure</code> option here. Because we could have network interruptions that cause services to miss requests or other flaky behavior, I wanted to build the same resiliency into my other applications and containers that I did with <code>service1</code>. For a refresher on the <code>BACKEND_HOSTNAME</code> environment variable, check out the <a href=https://jmhreif.com/blog/microservices-level5/ target=_blank rel=noopener>Level 5 blog post</a>.</p></div><div class=sect2><h3 id=_service1_application_changes_2>Service1: Application Changes</h3><div class=paragraph><p>First, we want to add the Spring Retry logic to <code>service2</code> by adding the three dependencies in the <code>pom.xml</code> (<a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/pom.xml#L29 target=_blank rel=noopener>lines 29-40</a>). Next, we can add the property to the <code>application.properties</code> to <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/src/main/resources/application.properties#L3 target=_blank rel=noopener>open all Actuator endpoints</a>. <strong>Note:</strong> We only do this in development or local testing - not production! We can comment out that property here for now. Finally, we can add <code>@EnableRetry</code> to the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/src/main/java/com/jmhreif/service2/Service2Application.java#L18 target=_blank rel=noopener>main application class</a> and <code>@Retryable</code> to each method we want to use retry logic. In our case, only the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/src/main/java/com/jmhreif/service2/Service2Application.java#L43 target=_blank rel=noopener><code>getBooks()</code> method</a>.</p></div><div class=paragraph><p>We have already built in flexibility to <code>service2</code> for local or remote testing with the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/src/main/java/com/jmhreif/service2/Service2Application.java#L20 target=_blank rel=noopener><code>hostname</code> property</a>. More detail on how and why we did that is in the <a href=https://jmhreif.com/blog/microservices-level5/ target=_blank rel=noopener>Level 5 blog post</a>.</p></div><div class=paragraph><p>While we are here, we can update the Spring Boot project to use the latest versions of everything for <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/pom.xml#L8 target=_blank rel=noopener>Spring Boot</a> and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/pom.xml#L17 target=_blank rel=noopener>Java</a>. I also updated the <a href=https://github.com/JMHReif/microservices-level9/blob/main/service2/Dockerfile#L3 target=_blank rel=noopener>service’s Dockerfile</a> to use the Azul JDK 17 as the base image.</p></div><div class=paragraph><p>We need to re-package the application and build the local container, just as we did in <code>service1</code>. Because this service interacts only with <code>service1</code>, it doesn’t need any ties to the config service or database. Let’s test it!</p></div></div><div class=sect2><h3 id=_round_3_put_it_to_the_test>Round 3: Put it to the test!</h3><div class=paragraph><p>We’ll use the <code>docker-compose up -d</code> command, as we did before, to spin up Docker Compose.</p></div><div class=paragraph><p>Then we test our endpoints.</p></div><div class=ulist><ul><li><p>Goodreads-config: command line with <code>curl localhost:8888/mongo-client/docker</code>.</p></li><li><p>Goodreads-svc1: command line with <code>curl localhost:8081/db</code>, <code>curl localhost:8081/db/books</code>, and <code>curl localhost:8081/db/book/623a1d969ff4341c13cbcc6b</code>.</p></li><li><p>Goodreads-svc2: command line with <code>curl localhost:8080/goodreads</code> and <code>curl localhost:8080/goodreads/books</code> or web browser with the URL.</p></li></ul></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/service2-test.png alt="service2 test"></div></div><div class=paragraph><p>And <code>docker-compose down</code> will shut down everything gracefully.</p></div></div></div></div><div class=sect1><h2 id=_goodreads_svc3_backend_service_for_authors>Goodreads-svc3: Backend service for Authors</h2><div class=sectionbody><div class=paragraph><p>Our third service is a near copy of <code>service1</code>, but it hosts author data (rather than books). Pretty much everything we learned before is also applied to this <code>service3</code>. We will list the changes for review.</p></div><div class=ulist><ul><li><p>Docker Compose: <a href=https://github.com/JMHReif/microservices-level9/blob/main/docker-compose.yml#L60 target=_blank rel=noopener>add configuration for <code>service3</code></a> (values match <code>service1</code>).</p></li><li><p>Application <code>pom.xml</code>: add three depedencies for retry and monitoring (<a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/pom.xml#L38 target=_blank rel=noopener>lines 38-49</a>). Also upgrade versions for <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/pom.xml#L8 target=_blank rel=noopener>Spring Boot</a>, <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/pom.xml#L17 target=_blank rel=noopener>Java</a>, and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/pom.xml#L18 target=_blank rel=noopener>Spring Cloud</a>.</p></li><li><p>Application <code>application.properties</code>: <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/src/main/resources/application.properties#L2 target=_blank rel=noopener>add Actuator endpoints property and comment out</a> several (for local testing only).</p></li><li><p>Application <code>Service3Application</code>: add <code>@EnableRetry</code> to <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/src/main/java/com/jmhreif/service3/Service3Application.java#L21 target=_blank rel=noopener>main application class</a> and add <code>@Retryable</code> to desired methods (<a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/src/main/java/com/jmhreif/service3/Service3Application.java#L39 target=_blank rel=noopener><code>getAuthors()</code></a> and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/src/main/java/com/jmhreif/service3/Service3Application.java#L43 target=_blank rel=noopener><code>getAuthor(id)</code></a>).</p></li><li><p>Dockerfile: use <a href=https://github.com/JMHReif/microservices-level9/blob/main/service3/Dockerfile#L3 target=_blank rel=noopener>Azul JDK 17 as base image</a>.</p></li><li><p>Application: re-package app with <code>mvn clean package -DskipTests=true</code> and build local Docker container</p></li><li><p>Config file: no changes because it will use the same values that <code>service1</code> uses.</p></li></ul></div><div class=paragraph><p>Let’s test!</p></div><div class=sect2><h3 id=_round_4_put_it_to_the_test>Round 4: Put it to the test!</h3><div class=paragraph><p>As usual, use <code>docker-compose up -d</code> at the command line to spin up our microservices system and test the endpoints with the commands listed below.</p></div><div class=ulist><ul><li><p>Goodreads-config: command line with <code>curl localhost:8888/mongo-client/docker</code>.</p></li><li><p>Goodreads-svc1: command line with <code>curl localhost:8081/db</code>, <code>curl localhost:8081/db/books</code>, and <code>curl localhost:8081/db/book/623a1d969ff4341c13cbcc6b</code>.</p></li><li><p>Goodreads-svc2: command line with <code>curl localhost:8080/goodreads</code> and <code>curl localhost:8080/goodreads/books</code>.</p></li><li><p>Goodreads-svc3: <code>curl localhost:8082/db</code>, <code>curl localhost:8082/db/authors</code>, and <code>curl localhost:8082/db/author/623a48c1b6575ea3e899b164</code> or web browser with only URL.</p></li></ul></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/service3-test.png alt="service3 test"></div></div><div class=paragraph><p>Close the system with <code>docker-compose down</code>.</p></div></div></div></div><div class=sect1><h2 id=_goodreads_svc4_backend_service_for_reviews>Goodreads-svc4: Backend service for Reviews</h2><div class=sectionbody><div class=paragraph><p>Similar to services one and three, <code>service4</code> is a backing service for book review data. However, this service interacts with a graph database in the cloud (<a href=https://dev.neo4j.com/aura-java target=_blank rel=noopener>Neo4j</a>). More background on this service is in the <a href=https://jmhreif.com/blog/microservices-level6/ target=_blank rel=noopener>Level 6 blog post</a>. Let’s list out our changes to bring <code>service4</code> into Docker Compose.</p></div><div class=ulist><ul><li><p>Docker Compose: <a href=https://github.com/JMHReif/microservices-level9/blob/main/docker-compose.yml#L75 target=_blank rel=noopener>add configuration for <code>service4</code></a>.</p></li><li><p>Application <code>pom.xml</code>: add three depedencies for retry and monitoring (<a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/pom.xml#L38 target=_blank rel=noopener>lines 38-49</a>). Upgrade versions for <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/pom.xml#L8 target=_blank rel=noopener>Spring Boot</a>, <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/pom.xml#L17 target=_blank rel=noopener>Java</a>, and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/pom.xml#L18 target=_blank rel=noopener>Spring Cloud</a>.</p></li><li><p>Application <code>application.properties</code>: <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/src/main/resources/application.properties#L2 target=_blank rel=noopener>add Actuator endpoints property and comment out</a> several (for local testing only).</p></li><li><p>Application <code>Service4Application</code>: add <code>@EnableRetry</code> to <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/src/main/java/com/jmhreif/service4/Service4Application.java#L22 target=_blank rel=noopener>main application class</a> and add <code>@Retryable</code> to desired methods (<a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/src/main/java/com/jmhreif/service4/Service4Application.java#L40 target=_blank rel=noopener><code>getReviews()</code></a> and <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/src/main/java/com/jmhreif/service4/Service4Application.java#L44 target=_blank rel=noopener><code>getBookReviews(id)</code></a>).</p></li><li><p>Dockerfile: use <a href=https://github.com/JMHReif/microservices-level9/blob/main/service4/Dockerfile#L3 target=_blank rel=noopener>Azul JDK 17 as base image</a>.</p></li><li><p>Application: re-package app with <code>mvn clean package -DskipTests=true</code> and build local Docker container</p></li><li><p>Config file <code>neo4j-client</code>: <a href=https://github.com/JMHReif/microservices-level9/blob/main/microservices-java-config/neo4j-client.yaml target=_blank rel=noopener>add Actuator endpoint property and application name</a>.</p></li></ul></div><div class=paragraph><p>We now have all of our services migrated to Docker Compose. Time to test the entire system!</p></div><div class=sect2><h3 id=_round_5_final_put_it_to_the_test>Round 5 (final!): Put it to the test!</h3><div class=paragraph><p>We can run our system with the same command we have been using.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-shell data-lang=shell>docker-compose up -d</code></pre></div></div><div class=paragraph><p>Next, we can test all of our endpoints.</p></div><div class=ulist><ul><li><p>Goodreads-config (mongo): command line with <code>curl localhost:8888/mongo-client/docker</code>.</p></li><li><p>Goodreads-svc1: command line with <code>curl localhost:8081/db</code>, <code>curl localhost:8081/db/books</code>, and <code>curl localhost:8081/db/book/623a1d969ff4341c13cbcc6b</code>.</p></li><li><p>Goodreads-svc2: command line with <code>curl localhost:8080/goodreads</code> and <code>curl localhost:8080/goodreads/books</code>.</p></li><li><p>Goodreads-svc3: <code>curl localhost:8082/db</code>, <code>curl localhost:8082/db/authors</code>, and <code>curl localhost:8082/db/author/623a48c1b6575ea3e899b164</code>.</p></li><li><p>Goodreads-config (neo4j): command line with <code>curl localhost:8888/neo4j-client/docker</code>.</p></li><li><p>Neo4j database: ensure <a href=https://console.neo4j.io/ target=_blank rel=noopener>AuraDB instance is running</a> (free instances are automatically paused after 3 days).</p></li><li><p>Goodreads-svc4: <code>curl localhost:8083/neo</code>, <code>curl localhost:8083/neo/reviews</code>, and <code>curl localhost:8083/neo/reviews/178186</code> or web browser with only URL.</p></li></ul></div><div class=imageblock><div class=content><img src=/img/microservices-lvl9/service4-test.png alt="service4 test"></div></div><div class=paragraph><p>Bring everything back down again with the below command.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-shell data-lang=shell>docker-compose down</code></pre></div></div></div></div></div><div class=sect1><h2 id=_wrapping_up>Wrapping up!</h2><div class=sectionbody><div class=paragraph><p>We have successfully created an orchestrated microservices system with Docker Compose!</p></div><div class=paragraph><p>We saw how Docker Compose can throw some tricky environment issues at us related to startup order and dependencies between microservices, but we were able to navigate those with additional configuration options. We also built resiliency into our application services with Spring Retry to help us handle service or network interruptions.</p></div><div class=paragraph><p>The microservices system now includes a database container (MongoDB), configuration service, three backing services (<code>service1</code>, <code>service3</code>, and <code>service4</code>), and a user-facing service (<code>service2</code>). We also connect to an external, cloud-hosted Neo4j database.</p></div><div class=paragraph><p>We have grown this system, and we hope to continue adding functionality and learning along the way. Happy coding!</p></div></div></div><div class=sect1><h2 id=_resources>Resources</h2><div class=sectionbody><div class=ulist><ul><li><p>Github: <a href=https://github.com/JMHReif/microservices-level9 target=_blank rel=noopener>microservices-level9</a> repository</p></li><li><p>Blog post: <a href=https://vsupalov.com/simple-fix-db-not-ready/ target=_blank rel=noopener>Simple Fix If Your Dockerized App Crashes…​</a></p></li><li><p>Documentation: <a href=https://docs.docker.com/compose/compose-file/#restart target=_blank rel=noopener>Docker Compose - restart</a></p></li><li><p>Neo4j AuraDB: <a href=https://dev.neo4j.com/aura-java target=_blank rel=noopener>Create a FREE database</a></p></li></ul></div></div></div><ul class=pa0><li class="list di"><a href=/tags/java class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">java</a></li><li class="list di"><a href=/tags/microservices class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">microservices</a></li><li class="list di"><a href=/tags/applications class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">applications</a></li><li class="list di"><a href=/tags/development class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">development</a></li><li class="list di"><a href=/tags/spring-boot class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring-boot</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/blog/microservices-level8/>Journeys in Java, Level 8: Add MongoDB to Spring Cloud Config</a></li><li class=mb2><a href=/blog/microservices-level7/>Journeys in Java, Level 7: Externalize Microservice Configuration</a></li><li class=mb2><a href=/blog/microservices-level6/>Journeys in Java, Level 6: Build a Microservice with Neo4j</a></li><li class=mb2><a href=/blog/microservices-level5/>Journeys in Java, Level 5: Manage Microservices with Docker Compose</a></li><li class=mb2><a href=/blog/microservices-level4/>Journeys in Java, Level 4: Building an Empire of Microservices</a></li><li class=mb2><a href=/blog/microservices-level3/>Journeys in Java, Level 3: Building an Empire of Microservices</a></li><li class=mb2><a href=/blog/microservices-level2/>Journeys in Java, Level 2: Building an Empire of Microservices</a></li><li class=mb2><a href=/blog/microservices-level1/>Journeys in Java, Level 1: Building an Empire of Microservices</a></li><li class=mb2><a href=/blog/migrate-sdn-part3/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 3</a></li><li class=mb2><a href=/blog/migrate-sdn-part2/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2</a></li><li class=mb2><a href=/blog/migrate-sdn-part1/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 1</a></li><li class=mb2><a href=/blog/create-data-marvel-sdn/>Create a Data Marvel with Spring Data Neo4j</a></li><li class=mb2><a href=/blog/java17-graph-explore/>Java 17: Explore the newly-released Java version in a graph database!</a></li><li class=mb2><a href=/blog/java-holds-its-own/>In the Language Wars, Java Holds Its Own</a></li></ul></div></aside></article></main><footer class="bg-dark-green bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://jmhreif.com/>&copy; Jennifer Reif 2022</a><div><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>