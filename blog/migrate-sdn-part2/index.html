<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2 | Jennifer Reif</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Photo credit Our previous post (Part 1) on this topic introduced us to Spring Data Neo4j and showed the architectural differences between version 5 and the latest version 6. This post begins the migration process by taking a Spring Data Neo4j 5 application with OGM and upgrades to the dependencies and syntax changes of Spring Data Neo4j 6.
Without further ado, let’s dive in!
Current application overview The code for today’s migration is a specific branch in the migration Github repository."><meta name=generator content="Hugo 0.119.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=https://jmhreif.com/blog/migrate-sdn-part2/><meta property="og:title" content="Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2"><meta property="og:description" content="Photo credit Our previous post (Part 1) on this topic introduced us to Spring Data Neo4j and showed the architectural differences between version 5 and the latest version 6. This post begins the migration process by taking a Spring Data Neo4j 5 application with OGM and upgrades to the dependencies and syntax changes of Spring Data Neo4j 6.
Without further ado, let’s dive in!
Current application overview The code for today’s migration is a specific branch in the migration Github repository."><meta property="og:type" content="article"><meta property="og:url" content="https://jmhreif.com/blog/migrate-sdn-part2/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-09-09T09:00:00-06:00"><meta property="article:modified_time" content="2021-09-09T09:00:00-06:00"><meta itemprop=name content="Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2"><meta itemprop=description content="Photo credit Our previous post (Part 1) on this topic introduced us to Spring Data Neo4j and showed the architectural differences between version 5 and the latest version 6. This post begins the migration process by taking a Spring Data Neo4j 5 application with OGM and upgrades to the dependencies and syntax changes of Spring Data Neo4j 6.
Without further ado, let’s dive in!
Current application overview The code for today’s migration is a specific branch in the migration Github repository."><meta itemprop=datePublished content="2021-09-09T09:00:00-06:00"><meta itemprop=dateModified content="2021-09-09T09:00:00-06:00"><meta itemprop=wordCount content="2647"><meta itemprop=keywords content="spring,neo4j,applications,development,migration,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2"><meta name=twitter:description content="Photo credit Our previous post (Part 1) on this topic introduced us to Spring Data Neo4j and showed the architectural differences between version 5 and the latest version 6. This post begins the migration process by taking a Spring Data Neo4j 5 application with OGM and upgrades to the dependencies and syntax changes of Spring Data Neo4j 6.
Without further ado, let’s dive in!
Current application overview The code for today’s migration is a specific branch in the migration Github repository."></head><body class="ma0 avenir bg-near-white"><header class="cover bg-top" style=background-image:url(https://jmhreif.com/img/sdn-migration/migrate-geese-farm.jpeg)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jennifer Reif</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/blog/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/abstracts/ title="Abstracts page">Abstracts</a></li></ul><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank rel=noopener class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank rel=noopener class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Blog</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/intent/tweet?url=https://jmhreif.com/blog/migrate-sdn-part2/&amp;text=Winter%20to%20Spring:%20Migrating%20from%20Spring%20Data%20Neo4j%205%20to%206,%20Part%202" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://jmhreif.com/blog/migrate-sdn-part2/&amp;title=Winter%20to%20Spring:%20Migrating%20from%20Spring%20Data%20Neo4j%205%20to%206,%20Part%202" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 2</h1><time class="f6 mv4 dib tracked" datetime=2021-09-09T09:00:00-06:00>September 9, 2021</time>
<span class="f6 mv4 dib tracked">- 13 minutes read</span>
<span class="f6 mv4 dib tracked">- 2647 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><div class=paragraph><small><i><a href="https://unsplash.com/photos/C8wSdXjiLMc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink">Photo credit</a></i></small></div><div class=paragraph><p>Our previous post (<a href=https://jmhreif.com/blog/migrate-sdn-part1/ target=_blank rel=noopener>Part 1</a>) on this topic introduced us to Spring Data Neo4j and showed the architectural differences between version 5 and the latest version 6. This post begins the migration process by taking a Spring Data Neo4j 5 application with OGM and upgrades to the dependencies and syntax changes of Spring Data Neo4j 6.</p></div><div class=paragraph><p>Without further ado, let’s dive in!</p></div><div class=sect1><h2 id=_current_application_overview>Current application overview</h2><div class=sectionbody><div class=paragraph><p>The code for today’s migration is a <a href=https://github.com/neo4j-examples/sdn-migration/tree/step1_sdn-ogm_imperative target=_blank rel=noopener>specific branch in the migration Github repository</a>. We start at the <code>step1</code> branch with SDN5/OGM and will be making changes to make the code match the <code>step2</code> branch.</p></div><div class=paragraph><p>In other words, <code>step2</code> code is our goal. This also means if you get lost along the way, you can check out the completed code to compare or start the next migration step.</p></div></div></div><div class=sect1><h2 id=_dependencies_and_pom_xml>Dependencies and pom.xml</h2><div class=sectionbody><div class=paragraph><p>I usually like to start with the dependencies in a project first to get the updated versions and syntax of any library (plus, then my IDE will catch things, too). In our project, that means the <code>pom.xml</code> file.</p></div><div class=paragraph><p>Let’s start by updating the Spring Boot version to the current latest (<code>2.5.4</code>). This should start a Maven sync (or else you can start one manually in your IDE or at the command line), pulling in the compatible versions of any libraries in your dependency tree.</p></div><div class=listingblock><div class=content><pre class=highlight><code>&lt;!-- FROM --&gt;
&lt;parent&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
	&lt;version&gt;2.3.7.RELEASE&lt;/version&gt;
	&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
&lt;/parent&gt;

&lt;!-- TO --&gt;
&lt;parent&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
	&lt;version&gt;2.5.4&lt;/version&gt;
	&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
&lt;/parent&gt;</code></pre></div></div><div class=paragraph><p>Next, I want to also set the standard Java version to Java <code>11</code>. While this isn’t a requirement, and projects still support Java 8, the default tends to be 11.</p></div><div class=listingblock><div class=content><pre class=highlight><code>&lt;!-- FROM --&gt;
&lt;properties&gt;
	&lt;java.version&gt;1.8&lt;/java.version&gt;
&lt;/properties&gt;

&lt;!-- TO --&gt;
&lt;properties&gt;
	&lt;java.version&gt;11&lt;/java.version&gt;
&lt;/properties&gt;</code></pre></div></div><div class=paragraph><p><strong>NOTE:</strong> Syntax of Java version also changed from a <code>1.x</code> format to whole numbers, like <code>11</code>.</p></div><div class=paragraph><p>If you didn’t run a Maven sync yet, now might be a good time for that. If you already did, another one might be in order with the Java version change. Thankfully, none of our other dependencies need upgraded. The versions are either pulled from our properties or are pulled from Maven directly.</p></div></div></div><div class=sect1><h2 id=_application_properties>application.properties</h2><div class=sectionbody><div class=paragraph><p>Next up are the connection details to connect to the database! After all, we can’t test any of our changes unless we can test against the database itself.</p></div><div class=paragraph><p>For Spring Data Neo4j 6, the property naming structures added some more specific identifiers in the dot-notation path and removed the <code>.data</code> identifier from the auth properties.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
spring.data.neo4j.uri=bolt://localhost:7687
spring.data.neo4j.username=neo4j
spring.data.neo4j.password=secret
logging.level.org.neo4j.ogm=debug

//TO
spring.neo4j.uri=bolt://localhost:7687
spring.neo4j.authentication.username=neo4j
spring.neo4j.authentication.password=secret
spring.data.neo4j.database=neo4j</code></pre></div></div><div class=paragraph><p>We also added a database property. This is because Neo4j supports multi-database features starting in version 4.0, so we need to tell the application which database in Neo4j to use to find the data. The default database is named <code>neo4j</code>, so we are just staying with that.</p></div></div></div><div class=sect1><h2 id=_domain_classes>Domain classes</h2><div class=sectionbody><div class=paragraph><p>Now we are ready to dive into our data classes and map the data domain in our application. There isn’t much altered in each class, so we will step through each change. Note, however, that many of the annotations need to be updated, as the package paths have changed (e.g. <code>@Id</code> and <code>@GeneratedValue</code>).</p></div><div class=paragraph><p>We will start with the <code>MovieEntity</code> class in <code>src/main/java/org/neo4j/sdnlegacy/movie</code> and work our way through that folder, then probably hop between the <code>movie</code> and <code>person</code> folders to logically move by adding layers of functionality versus class-by-class.</p></div><div class=paragraph><p>First, the annotation for the domain class has changed. Instead of <code>@NodeEntity</code>, the SDN6 annotation is <code>@Node</code>. This aligns more with other Spring Data project terminology (i.e. <code>@Entity</code> for Spring Data JPA and <code>@Document</code> for Spring Data MongoDB).</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
@NodeEntity(&#34;Movie&#34;)
public class MovieEntity {
}

//TO
@Node(&#34;Movie&#34;)
public class MovieEntity {
}</code></pre></div></div><div class=paragraph><p>We also can remove the annotation for the custom converter class. Instead, we will adjust the converter class code (next) and create a bean in the application class (shown later).</p></div><div class=listingblock><div class=content><pre class=highlight><code>//REMOVE
@Convert(Tagline.TaglineConverter.class)</code></pre></div></div><div class=paragraph><p>Next, we will go ahead and update the converter domain class for <code>Tagline</code>. As a quick explanation, there are various <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#conversions target=_blank rel=noopener>out-of-the-box conversions</a> for different data types, so that you can convert a value of one type in the database to a value of another type in the application, and vice versa. However, for types that are outside the standard data types (like our Tagline type), we need to create a <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#custom.conversions target=_blank rel=noopener>custom conversion</a>. This tells the application that this type doesn’t exist in the database, so we need to convert it from the app’s <code>Tagline</code> type to a <code>String</code> property in the database.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
public static class TaglineConverter implements AttributeConverter&lt;Tagline, String&gt; {
	@Override public String toGraphProperty(Tagline value) {
		return value.getTagline();
	}

	@Override public Tagline toEntityAttribute(String value) {
		return new Tagline(value);
	}
}

//TO
public static class TaglineConverter implements GenericConverter {
    @Override
    public Set&lt;ConvertiblePair&gt; getConvertibleTypes() {
        Set&lt;ConvertiblePair&gt; convertibleTypes = new HashSet&lt;&gt;();
        convertibleTypes.add(new ConvertiblePair(Value.class, Tagline.class));
        convertibleTypes.add(new ConvertiblePair(Tagline.class, Value.class));
        return convertibleTypes;
    }

    @Override
    public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
        if (Value.class.isAssignableFrom(sourceType.getType())) {
            return Tagline.of(((Value) source).asString());
        } else {
            return Values.value(((Tagline) source).getTagline());
        }
    }
}</code></pre></div></div><div class=paragraph><p>What has mostly changed in the code above is the lower half of the <code>Tagline</code> class where we are actually converting the values.</p></div><div class=paragraph><p>In the SDN5 version, we pass our data types into the <code>AttributeConverter&lt;Tagline, String></code>, then add two methods - one to convert from <code>Tagline</code> to <code>String</code> and one to do the reverse conversion.</p></div><div class=paragraph><p>In the SDN6 version, we are using a <code>GenericConverter</code> that allows us to be more flexible with the data types. Then, we also have two methods defined within it - one to list the conversion pairs we need to convert between (in this case, <code>Tagline</code> to <code>String</code> and vice versa) and one to handle the physical conversion.</p></div><div class=paragraph><p>Now let us look at the <code>Person</code> class (<code>src/main/java/org/neo4j/sdnlegacy/person</code>).</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
@NodeEntity
public class Person {
}

//TO
@Node(primaryLabel = &#34;Person&#34;)
public class Person {
}</code></pre></div></div><div class=paragraph><p>In the above code, adding the <code>primaryLabel</code> to our annotation tells us that there can be multiple labels on these nodes, but the primary one we want to use is the <code>Person</code> label.</p></div><div class=paragraph><p>For our next class, let us tackle the relationship between person and movie entities - mapped in our <code>ReviewRelationship</code> class.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
@RelationshipEntity(&#34;REVIEWED&#34;)
public class ReviewRelationship {
}

//TO
@RelationshipProperties
public class ReviewRelationship {
}</code></pre></div></div><div class=paragraph><p>Even though the annotation name only has a slight alteration in the above block, there is actually a larger architectural change behind this. The relationship entity has been moved to a pass-through entity, focusing on the properties that connect two entities, rather than being a separate entity itself.</p></div><div class=paragraph><p>This more aligns with development practices in other Spring Data projects and also promotes good data access practices in Neo4j. While relationships are separate entities and stored physically in the database, a relationship cannot exist without the entities it connects (nodes).</p></div><div class=paragraph><p>This logical difference extends further into the relationship class where we substitute the start node and end node annotations for a target node annotation. This supports the idea of a pass-through where one node points to the relationship class, and the relationship class points to the next node. By contrast, the prior start and end node annotations implied a separate entity that pointed to nodes on either side.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
@StartNode
private Person personNode;
@EndNode
private MovieEntity movieNode;

//TO
@TargetNode
private MovieEntity movie;</code></pre></div></div></div></div><div class=sect1><h2 id=_projection_classes>Projection classes</h2><div class=sectionbody><div class=paragraph><p>We now upgraded our main domain classes, but there are a couple of other classes we haven’t looked at yet - <code>Actor</code> and <code>ActedInMovieProjection</code>. These are two classes that we will look at next after a brief intro to projections.</p></div><div class=paragraph><p>I think of projections kind of like a view (i.e. table view) where we can customize which portions or how a domain class is returned. For instance, we can remove fields or add other relevant entities to our projected view of an entity.</p></div><div class=paragraph><p>The two classes mentioned above present two different types of projections offered in Spring Data Neo4j - <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#projections.interfaces target=_blank rel=noopener>interface-based projections</a> and <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#projections.dtos target=_blank rel=noopener>class-based projections (DTOs)</a>. Let’s dive in!</p></div><div class=paragraph><p>First, we will start with the interface-based projection - <code>ActedInMovieProjection</code>.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
@QueryResult
public class ActedInMovieProjection {
    //also includes override methods for equals(), hashcode(), and toString() methods
}

//TO
public interface ActedInMovieProjection {
}</code></pre></div></div><div class=paragraph><p>The starting version of the code above uses the <code>@QueryResult</code>, which is actually a <a href=https://docs.spring.io/spring-data/neo4j/docs/5.3.8.RELEASE/reference/html/#reference_programming-model_mapresult target=_blank rel=noopener>map-to-entity converter</a>, rather than a true projection. It takes the returning data and maps it, as long as the type matches in some fashion. In contrast, SDN6 drops the map converter and uses <a href=https://docs.spring.io/spring-data/neo4j/docs/5.3.8.RELEASE/reference/html/#reference_programming-projections target=_blank rel=noopener>projections</a> instead that restrict mapping to data that matches the underlying model. For our updated code, we migrate the <code>@QueryResult</code> class to an interface-based projection, which provides accessor methods for the fields.</p></div><div class=paragraph><p>Let’s look at the <code>Actor</code> class now.</p></div><div class=listingblock><div class=content><pre class=highlight><code>//FROM
public class Actor {
	private final String name;

	//constructor and getter method
}

//TO
public class Actor {
	private final String name;

    //constructor and getter method

	public static class ActorConverter implements GenericConverter {
		@Override
		public Set&lt;ConvertiblePair&gt; getConvertibleTypes() {
			return Collections.singleton(new ConvertiblePair(Actor.class, Value.class));
		}

		@Override
		public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
			return Values.value(((Actor) source).getName());
		}
	}
}</code></pre></div></div><div class=paragraph><p>We have seen the converter code before - from our <code>Tagline</code> class above. With the <code>Actor</code> converter, we are translating to and from the <code>Value</code> type, as well. In both cases, these are not known types to the Neo4j driver (or database), so we need to have the conversion methods to translate from our application types (<code>Tagline</code> or <code>Actor</code>) to Neo4j-understandable types (<code>Value</code>).</p></div><div class=paragraph><p>However, it is different from our <code>Tagline</code> class because <code>Actor</code> is not a field in a domain class. Instead, it is a parameter for a method and query (in <a href=https://github.com/neo4j-examples/sdn-migration/blob/step2_sdn_imperative/src/main/java/org/neo4j/sdnlegacy/movie/MovieRepository.java#L30 target=_blank rel=noopener><code>MovieRepository</code></a>).</p></div><div class=paragraph><p>You might notice that we have the conversion methods in the SDN6 code, but not in the SDN5/OGM code. Why is this? The OGM tests actually all run successfully without any additional conversion code (I checked again, just to be sure). :) So why, then, do we need the extra code to explicitly convert in SDN6? The reason is that SDN5 would translate objects to JSON (for Jackson), which allows OGM to map objects and values using dot-notation strings. While this seems like a nice, "black magic" feature, it is extremely error-prone. These mappings cannot really retain data types and can make for inaccurate mappings. So, though the SDN6 adds a few more lines of code, it ensures type-safe data mapping and accurate return results.</p></div><div class=paragraph><p>The last components for our migration are the two repository interfaces - <code>MovieRepository</code> and <code>PersonRepository</code>. Let’s work through those!</p></div></div></div><div class=sect1><h2 id=_repositories>Repositories</h2><div class=sectionbody><div class=paragraph><p>We will start with the <code>PersonRepository</code> because there are fewer methods. Our code diff is actually very small. The only difference is the first custom query (<code>@Query</code>). We can look at the difference more closely below.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>//FROM
@Query(&#34;MATCH (:Movie {title: $title})&lt;-[:ACTED_IN]-(p:Person) RETURN p.name AS name, p.born AS born ORDER BY p.name&#34;)
List&lt;ActedInMovieProjection&gt; findByActedInMovieTitle(String title);

//TO
@Query(&#34;MATCH (m:Movie {title: $title})-[r:ACTED_IN]-(p:Person) RETURN m, r, p ORDER BY p.name&#34;)
List&lt;ActedInMovieProjection&gt; findByActedInMovieTitle(String title);</code></pre></div></div><div class=paragraph><p>So, the true difference is in the <code>RETURN</code> statement. In the SDN5 version, we return individual properties and assign them to variables. In the SDN6 code, we return the entire objects (nodes and relationships) of <code>m</code>, <code>r</code>, and <code>p</code>. The reason for this difference is because of the data structures in SDN6, which has two aspects.</p></div><div class=paragraph><p>First, the projection in SDN5 is actually a query result where it converts data in a map to an entity. The SDN6 version of the code uses a regular projection instead (covered earlier in this article). Second, the SDN6 data structures returned from queries are different. We can see this by comparing the code in the test (<a href=https://github.com/neo4j-examples/sdn-migration/blob/step1_sdn-ogm_imperative/src/test/java/org/neo4j/sdnlegacy/SdnLegacyApplicationTests.java#L146 target=_blank rel=noopener>SDN5</a> and <a href=https://github.com/neo4j-examples/sdn-migration/blob/step2_sdn_imperative/src/test/java/org/neo4j/sdnlegacy/SdnLegacyApplicationTests.java#L154 target=_blank rel=noopener>SDN6</a>). SDN6 is bringing back full objects that we need to use methods to inspect and retrieve properties. This means a cleaner and more accurate mapping because we know we are returning data results that map directly to our application entities.</p></div><div class=paragraph><p>Now, even though the above custom query is the only visible change in code, there is one other difference in the format of return results in the <code>tomHanksCareer()</code> method. Code is below.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>@Query(&#34;MATCH (p:Person{name:&#39;Tom Hanks&#39;})-[r:ACTED_IN]-&gt;(m:Movie) return p,r,m&#34;)
List&lt;Person&gt; tomHanksCareer();</code></pre></div></div><div class=paragraph><p>The query is finding the <code>Person</code> node for <code>Tom Hanks</code>, then pulling all of his movies to get a look at his acting career. Both the SDN5 and SDN6 versions of the above code are the same; however, the comments in the SDN6 code (alongside the tests) shed a bit more light on what we can expect in the return results. The comment sends us to the test to understand semantic changes and says we can get the same return results by changing the SDN6 return statement to <code>RETURN p, collect(r), collect(m)</code>.</p></div><div class=paragraph><p>Let’s look at the test for more info.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>//FROM
@Test
void tomHanksCareer() {
	assertThat(personRepository.tomHanksCareer())
		.overridingErrorMessage(&#34;Expected Spring Data Neo4j/OGM to resolve the returned subgraph to a single node entity&#34;)
		.hasSize(1)
		.extracting(Person::getName)
		.containsOnly(&#34;Tom Hanks&#34;);
}

//TO
@Test
void tomHanksCareer() {
	List&lt;Person&gt; results = personRepository.tomHanksCareer();
	assertThat(results)
		.overridingErrorMessage(&#34;Expected Spring Data Neo4j 6 to return as many rows as distinct patterns&#34;)
		.hasSize(12)
		.extracting(Person::getName)
		.containsOnly(&#34;Tom Hanks&#34;);
	Set&lt;Integer&gt; hashCodes = collectIdentityHashCodes(results);
	assertThat(hashCodes)
		.overridingErrorMessage(&#34;Expected Spring Data Neo4j 6.0.2+ to deduplicate instances&#34;)
		.hasSize(1)
		.containsOnly(hashCodes.iterator().next());
}</code></pre></div></div><div class=paragraph><p>We see that the SDN5 rendition should produce a single person entity coming back (<code>Tom Hanks</code>), tied to several movies. For the SDN6 version, we see that we have a collection of persons returned (12!), and if we extract the <code>name</code> property from each one, we find that they are all <code>Tom Hanks</code>. We know we don’t have duplicate nodes for <code>Tom Hanks</code> in our database (verified using the <code>hashCodes</code> block), so what happened?</p></div><div class=paragraph><p>SDN6 is returning a list of <span class=underline>unique patterns</span> for the query, which will manifest into the results below.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-text data-lang=text>PersonA | Movie1
PersonA | Movie2
PersonA | Movie3
....</code></pre></div></div><div class=paragraph><p>By contrast, SDN5 aggregates by starting entity (<code>Person</code>), putting results into something like the following:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-text data-lang=text>PersonA | Movie1, Movie2, Movie3, ....</code></pre></div></div><div class=paragraph><p>The SDN6 version actually works more similarly to Cypher functionality. If you run the custom query in the browser alone and select the <code>table</code> view in the result pane, you will see a list of the same person tied to different movies.</p></div><div class=paragraph><p>Now that we have covered everything for queries with <code>Person</code>, let’s look at the <code>MovieRepository</code>!</p></div><div class=paragraph><p>Even though, the <code>MovieRepository</code> has a lot more methods, there are actually no differences in the code or the result sets. All of the code should look the same, as well as return the same things.</p></div><div class=paragraph><p>Last, but not least, is the bean we need in the application class for the type conversions (<code>Tagline</code> and <code>Actor</code>).</p></div></div></div><div class=sect1><h2 id=_application_class>Application class</h2><div class=sectionbody><div class=paragraph><p>Moving over to the <code>SDNLegacyApplication.java</code>, we will need to add a few lines of code that creates a bean for the converters to and from <code>Actor</code> and <code>Tagline</code> types in our application.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java>//TO
@Bean
public Neo4jConversions neo4jConversions() {
	List&lt;GenericConverter&gt; converters = new ArrayList&lt;&gt;();
	converters.add(new Tagline.TaglineConverter());
	converters.add(new Actor.ActorConverter());

	return new Neo4jConversions(converters);
}</code></pre></div></div><div class=paragraph><p>This registers the converter with SDN, notifying the framework to use this custom conversion, rather than a default, internal converter. This is detailed a bit more in the <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#custom.conversions target=_blank rel=noopener>documentation on custom conversions</a>, as well.</p></div><div class=paragraph><p>The code creates a list for the converters, then add each converter - one for <code>Tagline</code>, one for <code>Actor</code> - to the list. It registers both converters, so that when the application comes across one of the custom types, it knows exactly how to map them.</p></div></div></div><div class=sect1><h2 id=_wrapping_up>Wrapping up!</h2><div class=sectionbody><div class=paragraph><p>We have covered a lot of ground in this post, going from SDN5 with OGM to SDN6 (imperative style). From the pom.xml to domain entities and repositories, we inspected each of the differences and adjustments a developer would need to make to existing applications to upgrade the functionality. We even translated some custom functionality through converters, projections, and queries with minimal effort.</p></div><div class=paragraph><p>In the next post, we will go one step further and migrate our SDN6 application from imperative style code to reactive functionality, covering both the conceptual and code changes.</p></div><div class=paragraph><p>Happy coding!</p></div></div></div><div class=sect1><h2 id=_resources>Resources</h2><div class=sectionbody><div class=ulist><ul><li><p>Developer guide: <a href=https://neo4j.com/developer/spring-data-neo4j/ target=_blank rel=noopener>Spring Data Neo4j</a></p></li><li><p>Documentation: <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#reference target=_blank rel=noopener>Spring Data Neo4j</a></p></li><li><p>SDN docs: <a href=https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#Migrating target=_blank rel=noopener>Migration FAQ section</a></p></li></ul></div></div></div><ul class=pa0><li class="list di"><a href=/tags/spring/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring</a></li><li class="list di"><a href=/tags/neo4j/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">neo4j</a></li><li class="list di"><a href=/tags/applications/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">applications</a></li><li class="list di"><a href=/tags/development/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">development</a></li><li class="list di"><a href=/tags/migration/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">migration</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/blog/migrate-sdn-part1/>Winter to Spring: Migrating from Spring Data Neo4j 5 to 6, Part 1</a></li><li class=mb2><a href=/blog/20210802-create-data-marvel-sdn/>Create a Data Marvel with Spring Data Neo4j</a></li><li class=mb2><a href=/blog/create-data-marvel-sdn/>Create a Data Marvel with Spring Data Neo4j</a></li></ul></div></aside></article></main><footer class="bg-dark-green bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://jmhreif.com/>&copy; Jennifer Reif 2024</a><div><div class=ananke-socials><a href=https://twitter.com/JMHReif target=_blank rel=noopener class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/JMHReif target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://www.linkedin.com/in/jmhreif/ target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://jmhreif.com/index.xml target=_blank rel=noopener class="rss ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="RSS link" aria-label="follow on RSS——Opens in a new window"><span class=icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>